<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>همسر پرفیوم - فروشگاه تخصصی عطرهای لاکچری</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <!-- Firebase Auth UI -->
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />
    <style>
        /* استایل‌های پایه و ریشه */
        :root {
            --primary: #1a1a2e;
            --secondary: #0f3460;
            --accent: #e94560;
            --accent-light: #ff7b93;
            --light: #f0f5f9;
            --dark: #16213e;
            --text: #333;
            --white: #ffffff;
            --gray: #f8f9fa;
            --gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --transition: all 0.3s ease;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --radius: 8px;
            --glass: rgba(255, 255, 255, 0.15);
            --glass-dark: rgba(26, 26, 46, 0.8);
            --blur: blur(10px);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            background-color: var(--light);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            font-weight: 400;
        }
        
        /* هدر - بهینه‌سازی برای موبایل */
        .header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: var(--blur);
            box-shadow: var(--shadow);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            color: var(--primary);
            text-decoration: none;
            font-size: 24px;
            font-weight: 700;
            gap: 10px;
        }
        
        .logo-text {
            font-weight: 800;
            color: var(--primary);
            letter-spacing: -0.5px;
        }
        
        .logo-image {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 10px;
            transition: transform 0.3s ease;
        }
        
        .nav-desktop {
            display: flex;
            gap: 25px;
        }
        
        .nav-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            padding: 8px 0;
            font-size: 16px;
        }
        
        .nav-link:hover {
            color: var(--accent);
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 2px;
            background: var(--accent);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .header-icons {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .icon-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 20px;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
        }
        
        .icon-btn:hover {
            color: var(--accent);
            transform: translateY(-2px);
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid var(--accent-light);
            transition: var(--transition);
        }
        
        .user-avatar:hover {
            transform: scale(1.1);
        }
        
        .badge {
            position: absolute;
            top: -8px;
            left: -10px;
            background: var(--accent);
            color: var(--white);
            font-size: 12px;
            font-weight: bold;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* منوی همبرگر - بهینه برای موبایل */
        .hamburger {
            display: none;
            flex-direction: column;
            justify-content: space-between;
            width: 30px;
            height: 21px;
            cursor: pointer;
            z-index: 1001;
        }
        
        .hamburger span {
            height: 3px;
            width: 100%;
            background: var(--primary);
            border-radius: 3px;
            transition: var(--transition);
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: var(--blur);
            z-index: 1000;
            transition: var(--transition);
            padding: 80px 20px 20px;
            overflow-y: auto;
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
            border-left: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .mobile-menu.active {
            right: 0;
        }
        
        .mobile-nav {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .mobile-nav-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 18px;
            padding: 12px 20px;
            border-radius: 8px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(248, 249, 250, 0.5);
            backdrop-filter: var(--blur);
        }
        
        .mobile-nav-link:hover {
            background: rgba(233, 69, 96, 0.1);
            padding-right: 25px;
        }
        
        .mobile-nav-link i {
            font-size: 20px;
            min-width: 25px;
            color: var(--accent);
        }
        
        .close-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            color: var(--primary);
            font-size: 24px;
            cursor: pointer;
            background: rgba(0,0,0,0.05);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .close-menu:hover {
            transform: rotate(90deg);
        }
        
        /* مودال احراز هویت - بهینه برای موبایل */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .auth-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .auth-modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: var(--blur);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            overflow-y: auto;
        }
        
        .close-auth-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            z-index: 10;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid #eee;
        }
        
        .auth-tab {
            padding: 12px 25px;
            cursor: pointer;
            font-weight: 600;
            color: #777;
            transition: var(--transition);
            position: relative;
        }
        
        .auth-tab.active {
            color: var(--accent);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: 0;
            width: 100%;
            height: 3px;
            background: var(--accent);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-form-group {
            margin-bottom: 20px;
        }
        
        .auth-form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }
        
        .auth-form-input {
            width: 100%;
            padding: 14px 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
        }
        
        .auth-form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
        }
        
        .auth-form-button {
            width: 100%;
            padding: 14px;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }
        
        .auth-form-button:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }
        
        .auth-form-footer {
            text-align: center;
            margin-top: 20px;
            color: #777;
        }
        
        .auth-form-footer a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
        }
        
        .auth-divider {
            display: flex;
            align-items: center;
            margin: 25px 0;
            color: #777;
        }
        
        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #eee;
        }
        
        .auth-divider::before {
            margin-left: 15px;
        }
        
        .auth-divider::after {
            margin-right: 15px;
        }
        
        .auth-social-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .auth-social-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid #ddd;
            background: white;
            color: #333;
        }
        
        .auth-social-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .auth-social-button i {
            margin-left: 10px;
            font-size: 20px;
        }
        
        .auth-social-button.google {
            color: #DB4437;
            border-color: #DB4437;
        }
        
        /* منوی کاربر */
        .user-dropdown {
            position: relative;
        }
        
        .user-dropdown-menu {
            position: absolute;
            top: 50px;
            left: 0;
            background: white;
            min-width: 200px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            z-index: 1001;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
        }
        
        .user-dropdown:hover .user-dropdown-menu {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .user-dropdown-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .user-dropdown-item:first-child {
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }
        
        .user-dropdown-item:last-child {
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }
        
        .user-dropdown-item:hover {
            background: #f8f9fa;
            color: var(--accent);
        }
        
        .user-dropdown-item i {
            width: 20px;
            text-align: center;
        }
        
        /* پروفایل کاربر */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        
        .user-profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-light);
        }
        
        .user-profile-info h3 {
            font-size: 20px;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .user-profile-info p {
            color: #777;
            font-size: 14px;
        }
        
        /* بخش قهرمان - بهینه برای موبایل */
        .hero {
            height: 500px;
            background: linear-gradient(rgba(22, 33, 62, 0.85), rgba(22, 33, 62, 0.9)), 
                        url('https://images.unsplash.com/photo-1595425977377-6aaf06c4457c?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80');
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 20px;
            position: relative;
            overflow: hidden;
            margin-bottom: 50px;
        }
        
        .hero-content {
            max-width: 800px;
            position: relative;
            z-index: 1;
        }
        
        .hero-title {
            font-size: 3rem;
            color: var(--white);
            margin-bottom: 20px;
            font-weight: 900;
            line-height: 1.2;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--accent-light);
            margin-bottom: 40px;
            font-weight: 500;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }
        
        .search-container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
        }
        
        .search-bar {
            width: 100%;
            padding: 15px 20px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }
        
        .search-bar:focus {
            outline: none;
            box-shadow: 0 5px 20px rgba(233, 69, 96, 0.3);
        }
        
        /* بخش محصولات - بهینه برای موبایل */
        .section {
            padding: 60px 20px;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .section-title h2 {
            font-size: 2.2rem;
            color: var(--dark);
            font-weight: 900;
            display: inline-block;
            padding-bottom: 15px;
            position: relative;
        }
        
        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: var(--accent);
            border-radius: 2px;
        }
        
        .products-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, minmax(220px, 1fr));
            gap: 25px;
        }
        
        .product-card {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
            transition: var(--transition);
            position: relative;
            border: 1px solid rgba(240, 240, 240, 0.7);
            transform: translateY(0);
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }
        
        .product-image {
            height: 240px;
            background-color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            overflow: hidden;
            aspect-ratio: 1/1; /* مربع شکل */
        }
        
        .product-image img {
            width: 80%;
            height: 80%;
            object-fit: contain;
            transition: var(--transition);
            position: relative;
            z-index: 2;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--accent);
            color: var(--white);
            padding: 6px 15px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 700;
            z-index: 3;
        }
        
        .product-info {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .product-title:hover {
            color: var(--accent);
        }
        
        .product-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .product-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
        }
        
        .product-actions {
            display: flex;
            gap: 10px;
        }
        
        .action-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gray);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 16px;
        }
        
        .action-btn:hover {
            background: var(--accent);
            color: white;
            transform: scale(1.1);
        }
        
        /* مودال سبد خرید - بهینه برای موبایل */
        .cart-modal {
            position: fixed;
            top: 0;
            right: -420px;
            width: 100%;
            max-width: 400px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: var(--blur);
            z-index: 1000;
            transition: right 0.4s ease;
            padding: 25px;
            overflow-y: auto;
            box-shadow: -5px 0 25px rgba(0,0,0,0.15);
            border-left: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .cart-modal.open {
            right: 0;
        }
        
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        
        .cart-title {
            font-size: 24px;
            font-weight: 900;
            color: var(--dark);
        }
        
        .close-cart {
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #777;
            transition: var(--transition);
        }
        
        .close-cart:hover {
            transform: rotate(90deg);
        }
        
        .cart-items {
            margin-bottom: 35px;
        }
        
        .cart-item {
            display: flex;
            gap: 18px;
            padding: 18px 0;
            border-bottom: 1px solid #ddd;
        }
        
        .cart-item-image {
            width: 90px;
            height: 90px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .cart-item-image img {
            max-width: 75%;
            max-height: 75%;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .cart-item-size {
            font-size: 14px;
            color: #777;
            margin-bottom: 10px;
        }
        
        .cart-item-price {
            font-weight: 700;
            color: var(--accent);
            font-size: 17px;
        }
        
        .cart-item-remove {
            color: #ff6b6b;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            align-self: flex-start;
            transition: var(--transition);
        }
        
        .cart-item-remove:hover {
            transform: scale(1.1);
        }
        
        .cart-summary {
            border-top: 1px solid #ddd;
            padding-top: 25px;
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .shipping-cost {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            margin-bottom: 15px;
            color: #555;
        }
        
        .final-total {
            display: flex;
            justify-content: space-between;
            font-size: 22px;
            font-weight: 900;
            margin-bottom: 25px;
            padding-top: 15px;
            border-top: 1px dashed #ddd;
        }
        
        .generate-order {
            width: 100%;
            padding: 16px;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-weight: 700;
            font-size: 17px;
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }
        
        .generate-order:hover {
            background: var(--accent-light);
            transform: translateY(-3px);
            box-shadow: 0 7px 20px rgba(233, 69, 96, 0.5);
        }
        
        .order-text {
            background: rgba(248, 249, 250, 0.5);
            backdrop-filter: var(--blur);
            border-radius: 8px;
            padding: 20px;
            margin-top: 25px;
            font-size: 15px;
            display: none;
            line-height: 1.8;
            white-space: pre-line;
            font-family: 'Vazirmatn', Tahoma, sans-serif;
        }
        
        .order-text pre {
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            white-space: pre-wrap;
            line-height: 1.8;
            margin: 15px 0;
        }
        
        .copy-order {
            margin-top: 15px;
            padding: 10px 15px;
            background: var(--dark);
            color: var(--white);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: inline-block;
            font-size: 14px;
            transition: var(--transition);
        }
        
        .copy-order:hover {
            background: #333;
            transform: translateY(-2px);
        }
        
        .bank-info {
            background: rgba(230, 247, 255, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border-left: 4px solid var(--accent);
            backdrop-filter: var(--blur);
        }
        
        .bank-info p {
            margin-bottom: 10px;
        }
        
        .card-number {
            display: inline-block;
            background: #fff;
            padding: 8px 15px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #ddd;
        }
        
        .card-number:hover {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }
        
        .social-order-buttons {
            display: flex;
            gap: 15px;
            margin: 20px 0;
        }
        
        .social-order-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .social-order-btn.telegram {
            background: #0088cc;
        }
        
        .social-order-btn.instagram {
            background: #e1306c;
        }
        
        .social-order-btn:hover {
            transform: translateY(-3px);
        }
        
        .order-instruction {
            background: rgba(255, 255, 230, 0.5);
            border-left: 4px solid var(--accent);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        /* فوتر */
        .footer {
            background: var(--gradient);
            color: var(--white);
            padding: 70px 0 30px;
        }
        
        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 40px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-section h3 {
            font-size: 22px;
            margin-bottom: 25px;
            color: var(--accent-light);
            position: relative;
            padding-bottom: 12px;
            font-weight: 800;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--accent);
        }
        
        .footer-section p {
            margin-bottom: 20px;
            line-height: 1.8;
            font-size: 16px;
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section ul li {
            margin-bottom: 15px;
        }
        
        .footer-section ul li a {
            color: #ccc;
            text-decoration: none;
            transition: var(--transition);
            display: block;
            font-size: 16px;
        }
        
        .footer-section ul li a:hover {
            color: var(--accent-light);
        }
        
        .footer-contact li {
            display: flex;
            gap: 15px;
            margin-bottom: 18px;
            align-items: flex-start;
        }
        
        .footer-contact i {
            color: var(--accent);
            font-size: 20px;
            min-width: 25px;
            margin-top: 3px;
        }
        
        .contact-link {
            color: var(--white);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .contact-link:hover {
            color: var(--accent-light);
            text-decoration: underline;
        }
        
        .social-links {
            display: flex;
            gap: 18px;
            margin-top: 25px;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--white);
            border-radius: 50%;
            transition: var(--transition);
            font-size: 18px;
        }
        
        .social-links a:hover {
            background: var(--accent);
            color: var(--white);
            transform: translateY(-5px);
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #aaa;
            font-size: 15px;
        }
        
        /* واکنش‌گرا */
        @media (max-width: 1200px) {
            .products-grid {
                grid-template-columns: repeat(3, minmax(280px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .header-container {
                display: grid;
                grid-template-columns: auto 1fr auto;
                align-items: center;
                gap: 15px;
                padding: 0 20px;
            }
            
            .hamburger {
                display: flex;
            }
            
            .logo {
                justify-self: center;
            }
            
            .header-icons {
                justify-self: end;
            }
            
            .nav-desktop {
                display: none;
            }
            
            .section {
                padding: 40px 20px;
            }
            
            .products-grid {
                grid-template-columns: repeat(2, minmax(200px, 1fr));
                gap: 20px;
            }
            
            .hero {
                height: 400px;
            }
            
            .hero-title {
                font-size: 2.2rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
        }

        @media (max-width: 768px) {
            .section-title h2 {
                font-size: 1.8rem;
            }
            
            .products-grid {
                grid-template-columns: repeat(2, minmax(160px, 1fr));
                gap: 15px;
            }
            
            .product-image {
                height: 180px;
            }
            
            .product-title {
                font-size: 16px;
            }
            
            .product-price {
                font-size: 16px;
            }
        }
        
        @media (max-width: 576px) {
            .products-grid {
                grid-template-columns: repeat(2, minmax(140px, 1fr));
                gap: 12px;
            }
            
            .header-container {
                padding: 0 15px;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .logo-image {
                width: 35px;
                height: 35px;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
            }
            
            .auth-modal-content {
                padding: 20px;
            }
            
            .auth-tab {
                padding: 12px 15px;
                font-size: 14px;
            }
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: var(--blur);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 10000;
            transition: all 0.3s;
            opacity: 0;
            transform: translateY(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
        }
        
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* مودال جزئیات محصول با افکت شیشه‌ای */
        .product-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .product-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .product-modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: var(--blur);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            border-radius: 15px;
            overflow: hidden;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }
        
        .close-product-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 10;
            transition: transform 0.3s ease;
        }
        
        .close-product-modal:hover {
            transform: rotate(90deg);
        }
        
        .product-detail-container {
            display: flex;
            flex-direction: column;
        }
        
        @media (min-width: 768px) {
            .product-detail-container {
                flex-direction: row;
            }
        }
        
        .product-detail-image {
            flex: 1;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #ffffff;
            padding: 30px;
        }
        
        .product-detail-image img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }
        
        .product-detail-image:hover img {
            transform: scale(1.05);
        }
        
        .product-detail-info {
            flex: 1;
            padding: 30px;
        }
        
        .product-detail-title {
            font-size: 28px;
            color: var(--dark);
            margin-bottom: 15px;
            font-weight: 900;
        }
        
        .product-detail-price {
            font-size: 24px;
            color: var(--accent);
            font-weight: 800;
            margin-bottom: 20px;
        }
        
        .product-detail-description {
            margin-bottom: 25px;
            line-height: 1.8;
        }
        
        .product-detail-specs {
            margin-bottom: 25px;
        }
        
        .spec-item {
            display: flex;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .spec-title {
            font-weight: 700;
            min-width: 120px;
            color: var(--dark);
        }
        
        .spec-value {
            flex: 1;
        }
        
        .product-detail-sizes {
            margin-bottom: 25px;
        }
        
        .product-detail-sizes h3 {
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .size-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
        }
        
        .size-option-detail {
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--white);
            text-align: center;
        }
        
        .size-option-detail:hover, .size-option-detail.active {
            border-color: var(--accent);
            background: var(--accent);
            color: var(--white);
        }
        
        .size-price {
            display: block;
            font-weight: 700;
            margin-top: 5px;
            color: inherit;
        }
        
        .product-detail-actions {
            display: flex;
            gap: 15px;
        }
        
        .add-to-cart-detail {
            flex: 1;
            background: var(--accent);
            color: var(--white);
            border: none;
            padding: 14px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 15px;
        }
        
        .add-to-cart-detail:hover {
            background: var(--accent-light);
            transform: translateY(-3px);
        }
        
        .wishlist-btn-detail {
            width: 50px;
            height: 50px;
            background: var(--white);
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 18px;
        }
        
        .wishlist-btn-detail:hover, .wishlist-btn-detail.active {
            color: var(--accent);
            border-color: var(--accent);
            background: #fff0f3;
        }
        
        /* اوورلی برای مودال‌ها */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        /* مودال انتخاب حجم */
        .size-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .size-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .size-modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: var(--blur);
            width: 90%;
            max-width: 400px;
            border-radius: 15px;
            padding: 25px;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
        }
        
        .close-size-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: var(--accent);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 16px;
            cursor: pointer;
            z-index: 10;
        }
        
        .size-modal-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--dark);
            text-align: center;
        }
        
        .size-options-modal {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-bottom: 25px;
        }
        
        .size-option-modal {
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--white);
            text-align: center;
        }
        
        .size-option-modal:hover, .size-option-modal.active {
            border-color: var(--accent);
            background: var(--accent);
            color: var(--white);
        }
        
        .size-price-modal {
            display: block;
            font-weight: 700;
            margin-top: 5px;
            color: inherit;
        }
        
        .add-to-cart-size {
            width: 100%;
            padding: 14px;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-size: 15px;
        }
        
        .add-to-cart-size:hover {
            background: var(--accent-light);
        }
        
        /* نوار جستجو */
        .search-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: var(--blur);
            padding: 15px 20px;
            z-index: 1100;
            transform: translateY(-100%);
            transition: transform 0.4s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .search-header.active {
            transform: translateY(0);
        }
        
        .search-header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .close-search {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--primary);
        }
        
        .search-input {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 16px;
            transition: var(--transition);
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .search-results {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            display: none;
        }
        
        .search-result-item {
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .search-result-item:hover {
            background: #f9f9f9;
        }
        
        .search-result-image {
            width: 50px;
            height: 50px;
            object-fit: contain;
        }
        
        .search-result-name {
            font-weight: 600;
        }
        
        .search-result-category {
            font-size: 14px;
            color: #777;
        }

        /* مراحل تکمیل سفارش */
        .checkout-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }

        .checkout-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
            flex: 1;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            color: #777;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 8px;
            transition: all 0.3s;
            z-index: 2;
        }

        .step-number.active {
            background: var(--accent);
            color: white;
        }

        .step-number.completed {
            background: #4CAF50;
            color: white;
        }

        .step-title {
            font-size: 14px;
            color: #777;
            text-align: center;
            max-width: 100px;
        }

        .step-title.active {
            color: var(--accent);
            font-weight: 600;
        }

        .step-title.completed {
            color: #4CAF50;
        }

        .checkout-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #ddd;
            z-index: 0;
        }

        .checkout-progress {
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: var(--accent);
            z-index: 1;
            transition: width 0.3s;
        }

        /* فرم‌های تکمیل سفارش */
        .checkout-form-container {
            display: none;
        }

        .checkout-form-container.active {
            display: block;
        }

        .checkout-form {
            background: white;
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-size: 16px;
            transition: var(--transition);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-col {
            flex: 1;
        }

        .checkout-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 25px;
            border-radius: var(--radius);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #555;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        /* روش‌های ارسال */
        .shipping-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }

        .shipping-method {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .shipping-method:hover {
            border-color: var(--accent);
        }

        .shipping-method.selected {
            border-color: var(--accent);
            background: rgba(233, 69, 96, 0.05);
        }

        .shipping-method input {
            margin-left: 10px;
        }

        .shipping-method-content {
            flex: 1;
            margin-right: 10px;
        }

        .shipping-method-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .shipping-method-desc {
            font-size: 14px;
            color: #777;
        }

        .shipping-method-price {
            font-weight: 600;
            color: var(--accent);
        }

        /* اطلاعات پرداخت */
        .payment-info {
            background: #f9f9f9;
            border-radius: var(--radius);
            padding: 20px;
            margin: 20px 0;
        }

        .payment-info-title {
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .payment-info-details {
            line-height: 1.8;
        }

        /* آپلود فایل */
        .file-upload {
            margin: 20px 0;
        }

        .file-upload-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .file-upload-input {
            display: none;
        }

        .file-upload-button {
            display: inline-block;
            padding: 12px 20px;
            background: #f0f0f0;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .file-upload-button:hover {
            background: #e0e0e0;
        }

        .file-name {
            margin-right: 10px;
            font-size: 14px;
            color: #777;
        }

        /* خلاصه سفارش */
        .order-summary {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .order-summary-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .order-summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 15px;
        }

        .order-summary-total {
            font-weight: 700;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        /* تایید سفارش */
        .order-confirmation {
            text-align: center;
            padding: 40px 20px;
        }

        .order-confirmation-icon {
            font-size: 60px;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        .order-confirmation-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
        }

        .order-confirmation-message {
            font-size: 16px;
            color: #555;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* بررسی سفارش */
        .order-review {
            margin-top: 30px;
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .order-review-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--dark);
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .order-review-item {
            margin-bottom: 15px;
        }

        .order-review-label {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .order-review-value {
            color: #555;
        }
        
        /* لیست استان و شهر */
        .province-city-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .province-select, .city-select {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            font-size: 16px;
            background-color: white;
            cursor: pointer;
        }
        
        .province-select:focus, .city-select:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        /* بخش پروفایل و سفارشات */
        .profile-container, .orders-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .profile-header, .orders-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .profile-content, .orders-content {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        .profile-info, .order-details {
            margin-bottom: 30px;
        }
        
        .info-item {
            display: flex;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .info-label {
            font-weight: 600;
            min-width: 150px;
            color: var(--dark);
        }
        
        .info-value {
            flex: 1;
        }
        
        .order-card {
            border: 1px solid #eee;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 20px;
            transition: var(--transition);
        }
        
        .order-card:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .order-products {
            margin-top: 15px;
        }
        
        .order-product {
            display: flex;
            gap: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .order-product-image {
            width: 60px;
            height: 60px;
            object-fit: contain;
        }
        
        /* پنل مدیریت */
        .admin-panel {
            background: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 30px;
        }
        
        .admin-nav {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .admin-nav-link {
            padding: 10px 15px;
            border-radius: var(--radius);
            background: #f8f9fa;
            color: var(--dark);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .admin-nav-link.active, .admin-nav-link:hover {
            background: var(--accent);
            color: white;
        }
        
        .admin-content {
            padding: 20px;
        }
        
        .order-status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .status-pending {
            background: #ff9800;
            color: white;
        }
        
        .status-shipped {
            background: #2196f3;
            color: white;
        }
        
        .status-delivered {
            background: #4caf50;
            color: white;
        }
        
        .status-cancelled {
            background: #f44336;
            color: white;
        }
        
        .status-select {
            padding: 5px 10px;
            border-radius: var(--radius);
            border: 1px solid #ddd;
            cursor: pointer;
        }
        
        /* اسکرول سفارشی برای موبایل */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* راهنمای ورود اطلاعات */
        .input-hint {
            font-size: 12px;
            color: #777;
            margin-top: 5px;
            display: block;
        }
    </style>
</head>
<body>
    <!-- هدر -->
    <header class="header">
        <div class="header-container">
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <a href="#" class="logo">
                <div class="logo-text">همسر پرفیوم</div>
                <img src="assets/image/پروفایل.jpg" alt="لوگو همسر پرفیوم" class="logo-image">
            </a>
            
            <div class="header-icons">
                <button class="icon-btn" id="searchIcon">
                    <i class="fas fa-search"></i>
                </button>
                <button class="icon-btn" id="wishlistIcon">
                    <i class="far fa-heart"></i>
                    <span class="badge" id="wishlistCount">0</span>
                </button>
                <button class="icon-btn" id="cartIcon">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge" id="cartCount">0</span>
                </button>
                
                <!-- آواتار کاربر (پیش‌فرض مخفی) -->
                <div class="user-dropdown" id="userDropdown" style="display: none;">
                    <img src="https://via.placeholder.com/150" alt="پروفایل کاربر" class="user-avatar" id="userAvatar">
                    <div class="user-dropdown-menu">
                        <a href="#profile" class="user-dropdown-item" id="profileLink">
                            <i class="fas fa-user"></i> پروفایل
                        </a>
                        <a href="#orders" class="user-dropdown-item" id="ordersLink">
                            <i class="fas fa-shopping-bag"></i> سفارشات
                        </a>
                        <a href="#" class="user-dropdown-item" id="logoutLink">
                            <i class="fas fa-sign-out-alt"></i> خروج
                        </a>
                    </div>
                </div>
                
                <!-- دکمه ورود (پیش‌فرض نمایش داده می‌شود) -->
                <button class="icon-btn" id="loginBtn">
                    <i class="fas fa-user"></i>
                </button>
            </div>
            
            <nav class="nav-desktop">
                <a href="#" class="nav-link">خانه</a>
                <a href="#men" class="nav-link">عطر مردانه</a>
                <a href="#women" class="nav-link">عطر زنانه</a>
                <a href="#unisex" class="nav-link">یونی‌سکس</a>
                <a href="#contact" class="nav-link">تماس با ما</a>
            </nav>
        </div>
        
        <!-- منوی موبایل -->
        <div class="mobile-menu" id="mobileMenu">
            <div class="close-menu" id="closeMobileMenu">
                <i class="fas fa-times"></i>
            </div>
            <nav class="mobile-nav">
                <a href="#" class="mobile-nav-link">
                    <i class="fas fa-home"></i> خانه
                </a>
                <a href="#men" class="mobile-nav-link">
                    <i class="fas fa-male"></i> عطر مردانه
                </a>
                <a href="#women" class="mobile-nav-link">
                    <i class="fas fa-female"></i> عطر زنانه
                </a>
                <a href="#unisex" class="mobile-nav-link">
                    <i class="fas fa-venus-mars"></i> یونی‌سکس
                </a>
                <a href="#contact" class="mobile-nav-link">
                    <i class="fas fa-phone"></i> تماس با ما
                </a>
                <a href="#profile" class="mobile-nav-link" id="mobileProfile" style="display: none;">
                    <i class="fas fa-user"></i> پروفایل
                </a>
                <a href="#orders" class="mobile-nav-link" id="mobileOrders" style="display: none;">
                    <i class="fas fa-shopping-bag"></i> سفارشات
                </a>
                <a href="#" class="mobile-nav-link" id="mobileWishlist">
                    <i class="far fa-heart"></i> لیست علاقه‌مندی‌ها
                    <span class="badge" id="mobileWishlistCount">0</span>
                </a>
                <a href="#" class="mobile-nav-link" id="mobileCart">
                    <i class="fas fa-shopping-cart"></i> سبد خرید
                    <span class="badge" id="mobileCartCount">0</span>
                </a>
                <a href="#" class="mobile-nav-link" id="mobileLogout" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i> خروج
                </a>
                <a href="#" class="mobile-nav-link" id="mobileLogin">
                    <i class="fas fa-sign-in-alt"></i> ورود / ثبت‌نام
                </a>
            </nav>
        </div>
    </header>
    
    <!-- مودال احراز هویت -->
    <div class="auth-modal" id="authModal">
        <div class="auth-modal-content">
            <button class="close-auth-modal" id="closeAuthModal">&times;</button>
            
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">ورود</div>
                <div class="auth-tab" data-tab="register">ثبت‌نام</div>
            </div>
            
            <div class="auth-form active" id="loginForm">
                <div class="auth-form-group">
                    <label for="loginEmail" class="auth-form-label">ایمیل</label>
                    <input type="email" id="loginEmail" class="auth-form-input" placeholder="example@example.com">
                </div>
                
                <div class="auth-form-group">
                    <label for="loginPassword" class="auth-form-label">رمز عبور</label>
                    <input type="password" id="loginPassword" class="auth-form-input" placeholder="رمز عبور">
                </div>
                
                <button class="auth-form-button" id="loginButton">ورود به حساب</button>
                
                <div class="auth-form-footer">
                    حساب کاربری ندارید؟ <a href="#" id="showRegister">ثبت‌نام کنید</a>
                </div>
                
                <div class="auth-divider">یا</div>
                
                <div class="auth-social-buttons">
                    <button class="auth-social-button google" id="googleLogin">
                        <i class="fab fa-google"></i> ورود با گوگل
                    </button>
                </div>
            </div>
            
            <div class="auth-form" id="registerForm">
                <div class="auth-form-group">
                    <label for="registerName" class="auth-form-label">نام کامل</label>
                    <input type="text" id="registerName" class="auth-form-input" placeholder="نام و نام خانوادگی">
                    <span class="input-hint">(فارسی یا انگلیسی)</span>
                </div>
                
                <div class="auth-form-group">
                    <label for="registerPhone" class="auth-form-label">شماره تماس</label>
                    <input type="tel" id="registerPhone" class="auth-form-input" placeholder="09xxxxxxxxx">
                    <span class="input-hint">(فقط اعداد انگلیسی)</span>
                </div>
                
                <div class="auth-form-group">
                    <label for="registerEmail" class="auth-form-label">ایمیل</label>
                    <input type="email" id="registerEmail" class="auth-form-input" placeholder="example@example.com">
                </div>
                
                <div class="auth-form-group">
                    <label for="registerPassword" class="auth-form-label">رمز عبور</label>
                    <input type="password" id="registerPassword" class="auth-form-input" placeholder="حداقل ۶ کاراکتر">
                </div>
                
                <div class="auth-form-group">
                    <label for="registerConfirmPassword" class="auth-form-label">تکرار رمز عبور</label>
                    <input type="password" id="registerConfirmPassword" class="auth-form-input" placeholder="تکرار رمز عبور">
                </div>
                
                <button class="auth-form-button" id="registerButton">ثبت‌نام</button>
                
                <div class="auth-form-footer">
                    حساب کاربری دارید؟ <a href="#" id="showLogin">وارد شوید</a>
                </div>
                
                <div class="auth-divider">یا</div>
                
                <div class="auth-social-buttons">
                    <button class="auth-social-button google" id="googleRegister">
                        <i class="fab fa-google"></i> ثبت‌نام با گوگل
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- هدر جستجو -->
    <div class="search-header" id="searchHeader">
        <div class="search-header-container">
            <button class="close-search" id="closeSearch">
                <i class="fas fa-arrow-right"></i>
            </button>
            <input type="text" class="search-input" id="searchInput" placeholder="جستجوی محصولات...">
        </div>
        <div class="search-results" id="searchResults">
            <!-- نتایج جستجو اینجا نمایش داده می‌شود -->
        </div>
    </div>
    
    <!-- بخش قهرمان -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">کشف رایحه‌های منحصر به فرد</h1>
            <p class="hero-subtitle">با بهترین عطرهای اورجینال از همسر پرفیوم</p>
        </div>
    </section>
    
    <!-- بخش پروفایل کاربر -->
    <section class="section" id="profile" style="display: none;">
        <div class="profile-container">
            <div class="profile-header">
                <h2>پروفایل کاربری</h2>
            </div>
            <div class="profile-content">
                <div class="user-profile">
                    <img src="https://via.placeholder.com/150" alt="پروفایل کاربر" class="user-profile-avatar">
                    <div class="user-profile-info">
                        <h3 id="profileName">نام کاربر</h3>
                        <p id="profileEmail">example@example.com</p>
                    </div>
                </div>
                
                <div class="profile-info">
                    <div class="info-item">
                        <div class="info-label">نام کامل:</div>
                        <div class="info-value" id="profileFullName">احسان بهبودنیا</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">شماره تماس:</div>
                        <div class="info-value" id="profilePhone">۰۹۳۰۷۷۸۰۸۱۷</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">ایمیل:</div>
                        <div class="info-value" id="profileEmailValue">ehsanbehboudnia@gmail.com</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">تاریخ عضویت:</div>
                        <div class="info-value">۱۴۰۳/۰۱/۱۵</div>
                    </div>
                </div>
                
                <button class="btn btn-primary" id="editProfile">ویرایش پروفایل</button>
            </div>
        </div>
    </section>
    
    <!-- بخش سفارشات کاربر -->
    <section class="section" id="orders" style="display: none;">
        <div class="orders-container">
            <div class="orders-header">
                <h2>سفارشات من</h2>
            </div>
            <div class="orders-content">
                <div class="order-card">
                    <div class="order-header">
                        <div class="order-number">سفارش #۱۲۳۴۵۶</div>
                        <div class="order-date">۱۴۰۳/۰۲/۰۵</div>
                        <div class="order-status status-delivered">تحویل شده</div>
                    </div>
                    <div class="order-details">
                        <div class="info-item">
                            <div class="info-label">مبلغ کل:</div>
                            <div class="info-value">۱,۲۵۰,۰۰۰ تومان</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">روش ارسال:</div>
                            <div class="info-value">پست پیشتاز</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">وضعیت:</div>
                            <div class="info-value">تحویل شده</div>
                        </div>
                    </div>
                    <div class="order-products">
                        <div class="order-product">
                            <img src="https://via.placeholder.com/100" alt="محصول" class="order-product-image">
                            <div>
                                <div class="product-name">شنل پلاتینیوم</div>
                                <div class="product-price">۵۵۰,۰۰۰ تومان</div>
                            </div>
                        </div>
                        <div class="order-product">
                            <img src="https://via.placeholder.com/100" alt="محصول" class="order-product-image">
                            <div>
                                <div class="product-name">تایگار</div>
                                <div class="product-price">۷۰۰,۰۰۰ تومان</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="order-card">
                    <div class="order-header">
                        <div class="order-number">سفارش #۱۲۳۴۵۷</div>
                        <div class="order-date">۱۴۰۳/۰۲/۰۱</div>
                        <div class="order-status status-shipped">در حال ارسال</div>
                    </div>
                    <div class="order-details">
                        <div class="info-item">
                            <div class="info-label">مبلغ کل:</div>
                            <div class="info-value">۹۵۰,۰۰۰ تومان</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">روش ارسال:</div>
                            <div class="info-value">ماهکس</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">وضعیت:</div>
                            <div class="info-value">در حال ارسال</div>
                        </div>
                    </div>
                    <div class="order-products">
                        <div class="order-product">
                            <img src="https://via.placeholder.com/100" alt="محصول" class="order-product-image">
                            <div>
                                <div class="product-name">مارلی هالتان</div>
                                <div class="product-price">۹۵۰,۰۰۰ تومان</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- محصولات ویژه -->
    <section class="section" id="men">
        <div class="section-title">
            <h2>عطرهای مردانه</h2>
        </div>
        
        <div class="products-container">
            <div class="products-grid" id="menPerfumes">
                <!-- محصولات توسط جاوااسکریپت اضافه می‌شوند -->
            </div>
        </div>
    </section>
    
    <!-- عطرهای زنانه -->
    <section class="section" style="background: #f8f9fa;" id="women">
        <div class="section-title">
            <h2>عطرهای زنانه</h2>
        </div>
        
        <div class="products-container">
            <div class="products-grid" id="womenPerfumes">
                <!-- محصولات توسط جاوااسکریپت اضافه می‌شوند -->
            </div>
        </div>
    </section>
    
    <!-- عطرهای یونی‌سکس -->
    <section class="section" id="unisex">
        <div class="section-title">
            <h2>عطرهای یونی‌سکس</h2>
        </div>
        
        <div class="products-container">
            <div class="products-grid" id="unisexPerfumes">
                <!-- محصولات توسط جاوااسکریپت اضافه می‌شوند -->
            </div>
        </div>
    </section>
    
    <!-- بخش تماس با ما -->
    <section class="section" id="contact">
        <div class="section-title">
            <h2>تماس با ما</h2>
        </div>
        
        <div style="max-width: 1000px; margin: 0 auto; background: var(--white); border-radius: var(--radius); padding: 40px; box-shadow: var(--shadow);">
            <div style="display: flex; flex-wrap: wrap; gap: 40px;">
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="font-size: 24px; margin-bottom: 20px; color: var(--dark);">اطلاعات تماس</h3>
                    <p style="margin-bottom: 25px; line-height: 1.8;">برای دریافت مشاوره، پیگیری سفارشات و هرگونه سوال با ما در ارتباط باشید.</p>
                    
                    <div style="margin-bottom: 25px;">
                        <div style="display: flex; align-items: center; margin-bottom: 20px;">
                            <i class="fas fa-phone-alt" style="font-size: 24px; color: var(--accent); margin-left: 15px;"></i>
                            <div>
                                <h4 style="font-size: 18px; margin-bottom: 5px;">تلفن تماس</h4>
                                <a href="tel:+989307780817" class="contact-link" style="font-size: 18px; color: var(--dark);">۰۹۳۰۷۷۸۰۸۱۷</a>
                            </div>
                        </div>
                        
                        <div style="display: flex; align-items: center; margin-bottom: 20px;">
                            <i class="fab fa-instagram" style="font-size: 24px; color: var(--accent); margin-left: 15px;"></i>
                            <div>
                                <h4 style="font-size: 18px; margin-bottom: 5px;">اینستاگرام</h4>
                                <a href="https://instagram.com/hamsarperfume" target="_blank" class="contact-link" style="font-size: 18px; color: var(--dark);">hamsarperfume@</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="social-links">
                        <a href="https://instagram.com/hamsarperfume" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://t.me/hamsar_perfume" target="_blank"><i class="fab fa-telegram"></i></a>
                        <a href="https://wa.me/989307780817" target="_blank"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                
                <div style="flex: 1; min-width: 300px;">
                    <h3 style="font-size: 24px; margin-bottom: 20px; color: var(--dark);">آدرس فروشگاه</h3>
                    <p style="margin-bottom: 25px; line-height: 1.8;">
                        سبزوار، خیابان بهار
                    </p>
                    
                    <div style="background: #f8f9fa; border-radius: var(--radius); padding: 25px;">
                        <h4 style="font-size: 18px; margin-bottom: 15px; color: var(--dark);">ارسال به سراسر کشور</h4>
                        <p>سفارشات شما در کوتاه‌ترین زمان ممکن به سراسر ایران ارسال می‌شود.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- فوتر -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>درباره ما</h3>
                <p>همسر پرفیوم با سالها تجربه در زمینه عرضه عطرهای اورجینال و باکیفیت، آماده خدمت‌رسانی به شما مشتریان گرامی می‌باشد. ما بهترین‌ها را برای شما انتخاب می‌کنیم.</p>
            </div>
            
            <div class="footer-section">
                <h3>لینک‌های سریع</h3>
                <ul>
                    <li><a href="#">صفحه اصلی</a></li>
                    <li><a href="#men">عطرهای مردانه</a></li>
                    <li><a href="#women">عطرهای زنانه</a></li>
                    <li><a href="#unisex">عطرهای یونی‌سکس</a></li>
                    <li><a href="#contact">تماس با ما</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>خدمات مشتریان</h3>
                <ul>
                    <li><a href="#">سوالات متداول</a></li>
                    <li><a href="#">رویه بازگرداندن کالا</a></li>
                    <li><a href="#">شرایط و ضوابط</a></li>
                    <li><a href="#">حریم خصوصی</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>تماس با ما</h3>
                <ul class="footer-contact">
                    <li>
                        <i class="fas fa-map-marker-alt"></i>
                        <span>سبزوار، خیابان بهار</span>
                    </li>
                    <li>
                        <i class="fas fa-phone"></i>
                        <a href="tel:+989307780817" class="contact-link">۰۹۳۰۷۷۸۰۸۱۷</a>
                    </li>
                    <li>
                        <i class="fas fa-envelope"></i>
                        <a href="mailto:info@hamsarperfume.com" class="contact-link">info@hamsarperfume.com</a>
                    </li>
                </ul>
                <div class="social-links" style="margin-top: 15px;">
                    <a href="https://instagram.com/hamsarperfume" target="_blank"><i class="fab fa-instagram"></i></a>
                    <a href="https://t.me/hamsar_perfume" target="_blank"><i class="fab fa-telegram"></i></a>
                    <a href="https://wa.me/989307780817" target="_blank"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
        
        <div class="copyright">
            <p>تمامی حقوق برای فروشگاه همسر پرفیوم محفوظ است © ۱۴۰۳</p>
        </div>
    </footer>
    
    <!-- مودال سبد خرید -->
    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h3 class="cart-title">سبد خرید شما</h3>
            <button class="close-cart" id="closeCart">&times;</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- آیتم‌های سبد خرید به صورت پویا اضافه می‌شوند -->
        </div>
        <div class="cart-summary">
            <div class="cart-total">
                <span>جمع سبد خرید:</span>
                <span id="cartTotal">۰ تومان</span>
            </div>
            <button class="generate-order" id="checkoutButton">
                <i class="fas fa-arrow-left"></i> تایید و ادامه سفارش
            </button>
        </div>
    </div>
    
    <!-- مودال تکمیل سفارش -->
    <div class="cart-modal" id="checkoutModal">
        <div class="cart-header">
            <h3 class="cart-title">تکمیل سفارش</h3>
            <button class="close-cart" id="closeCheckout">&times;</button>
        </div>
        
        <div class="checkout-steps">
            <div class="checkout-step">
                <div class="step-number active" id="step1">1</div>
                <div class="step-title active">اطلاعات ارسال</div>
            </div>
            <div class="checkout-step">
                <div class="step-number" id="step2">2</div>
                <div class="step-title">روش ارسال</div>
            </div>
            <div class="checkout-step">
                <div class="step-number" id="step3">3</div>
                <div class="step-title">پرداخت</div>
            </div>
            <div class="checkout-progress" id="checkoutProgress" style="width: 0%"></div>
        </div>
        
        <!-- مرحله 1: اطلاعات ارسال -->
        <div class="checkout-form-container active" id="shippingInfoForm">
            <div class="checkout-form">
                <div class="form-group">
                    <label for="fullName" class="form-label">نام و نام خانوادگی گیرنده</label>
                    <input type="text" id="fullName" class="form-control" placeholder="نام کامل گیرنده">
                    <span class="input-hint">(فارسی یا انگلیسی)</span>
                </div>
                
                <div class="form-group">
                    <label for="phoneNumber" class="form-label">شماره تماس گیرنده</label>
                    <input type="tel" id="phoneNumber" class="form-control" placeholder="09xxxxxxxxx">
                    <span class="input-hint">(فقط اعداد انگلیسی)</span>
                </div>
                
                <div class="form-row">
                    <div class="form-col">
                        <div class="form-group">
                            <label for="province" class="form-label">استان</label>
                            <select id="province" class="form-control">
                                <option value="">انتخاب استان</option>
                                <!-- استان‌ها توسط جاوااسکریپت اضافه می‌شوند -->
                            </select>
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="form-group">
                            <label for="city" class="form-label">شهر</label>
                            <select id="city" class="form-control" disabled>
                                <option value="">ابتدا استان را انتخاب کنید</option>
                                <!-- شهرها توسط جاوااسکریپت اضافه می‌شوند -->
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="address" class="form-label">آدرس کامل</label>
                    <textarea id="address" class="form-control" rows="3" placeholder="آدرس کامل پستی شامل خیابان، کوچه، پلاک، واحد"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="postalCode" class="form-label">کد پستی</label>
                    <input type="text" id="postalCode" class="form-control" placeholder="کد پستی ۱۰ رقمی">
                    <span class="input-hint">(فقط اعداد انگلیسی)</span>
                </div>
                
                <div class="form-group">
                    <label for="orderNotes" class="form-label">توضیحات سفارش (اختیاری)</label>
                    <textarea id="orderNotes" class="form-control" rows="2" placeholder="توضیحات اضافی درباره سفارش"></textarea>
                </div>
            </div>
            
            <div class="checkout-actions">
                <button class="btn btn-secondary" id="cancelCheckout">انصراف</button>
                <button class="btn btn-primary" id="nextToShippingMethod">مرحله بعد</button>
            </div>
        </div>
        
        <!-- مرحله 2: روش ارسال -->
        <div class="checkout-form-container" id="shippingMethodForm">
            <div class="checkout-form">
                <h3 style="margin-bottom: 20px; color: var(--dark);">روش ارسال را انتخاب کنید</h3>
                
                <div class="shipping-methods">
                    <label class="shipping-method" for="shippingMethod1">
                        <input type="radio" id="shippingMethod1" name="shippingMethod" value="post" checked>
                        <div class="shipping-method-content">
                            <div class="shipping-method-title">پست پیشتاز</div>
                            <div class="shipping-method-desc">تحویل بین ۳ تا ۷ روز کاری</div>
                        </div>
                        <div class="shipping-method-price">۵۵,۰۰۰ تومان</div>
                    </label>
                    
                    <label class="shipping-method" for="shippingMethod2">
                        <input type="radio" id="shippingMethod2" name="shippingMethod" value="mahax">
                        <div class="shipping-method-content">
                            <div class="shipping-method-title">ماهکس (پس کرایه)</div>
                            <div class="shipping-method-desc">تحویل بین ۱ تا ۲ روز کاری</div>
                        </div>
                        <div class="shipping-method-price">پس کرایه</div>
                    </label>
                </div>
            </div>
            
            <div class="order-summary">
                <div class="order-summary-title">خلاصه سفارش</div>
                <div class="order-summary-item">
                    <span>جمع سبد خرید:</span>
                    <span id="checkoutCartTotal">۰ تومان</span>
                </div>
                <div class="order-summary-item">
                    <span>هزینه ارسال:</span>
                    <span id="checkoutShippingCost">۰ تومان</span>
                </div>
                <div class="order-summary-total">
                    <span>جمع کل:</span>
                    <span id="checkoutFinalTotal">۰ تومان</span>
                </div>
            </div>
            
            <div class="checkout-actions">
                <button class="btn btn-secondary" id="backToShippingInfo">مرحله قبل</button>
                <button class="btn btn-primary" id="nextToPayment">مرحله بعد</button>
            </div>
        </div>
        
        <!-- مرحله 3: پرداخت -->
        <div class="checkout-form-container" id="paymentForm">
            <div class="checkout-form">
                <h3 style="margin-bottom: 20px; color: var(--dark);">پرداخت سفارش</h3>
                
                <div class="payment-info">
                    <div class="payment-info-title">اطلاعات پرداخت</div>
                    <div class="payment-info-details">
                        <p>لطفاً مبلغ <strong id="paymentAmount">۰ تومان</strong> را به شماره کارت زیر واریز نمایید:</p>
                        <p class="card-number" onclick="copyCardNumber()">۶۲۱۹۸۶۱۹۰۲۷۳۱۹۲۵</p>
                        <p>به نام: احسان بهبودنیا</p>
                        <p>بانک سامان</p>
                    </div>
                </div>
                
                <div class="file-upload">
                    <label class="file-upload-label">تصویر فیش واریزی</label>
                    <input type="file" id="receiptImage" class="file-upload-input" accept="image/*" required>
                    <label for="receiptImage" class="file-upload-button">
                        <span class="file-name" id="fileName">فایلی انتخاب نشده</span>
                        <i class="fas fa-upload"></i>
                    </label>
                </div>
                
                <div class="order-review">
                    <div class="order-review-title">بررسی سفارش</div>
                    <div class="order-review-item">
                        <div class="order-review-label">نام گیرنده:</div>
                        <div class="order-review-value" id="reviewFullName">-</div>
                    </div>
                    <div class="order-review-item">
                        <div class="order-review-label">شماره تماس:</div>
                        <div class="order-review-value" id="reviewPhoneNumber">-</div>
                    </div>
                    <div class="order-review-item">
                        <div class="order-review-label">آدرس:</div>
                        <div class="order-review-value" id="reviewAddress">-</div>
                    </div>
                    <div class="order-review-item">
                        <div class="order-review-label">روش ارسال:</div>
                        <div class="order-review-value" id="reviewShippingMethod">-</div>
                    </div>
                    
                    <div class="order-review-item">
                        <div class="order-review-label">محصولات:</div>
                        <div class="order-review-value" id="reviewProducts">
                            <!-- محصولات توسط جاوااسکریپت اضافه می‌شوند -->
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="checkout-actions">
                <button class="btn btn-secondary" id="backToShippingMethod">مرحله قبل</button>
                <button class="btn btn-primary" id="completeOrder">تکمیل سفارش</button>
            </div>
        </div>
        
        <!-- تایید سفارش -->
        <div class="checkout-form-container" id="orderConfirmation">
            <div class="order-confirmation">
                <div class="order-confirmation-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 class="order-confirmation-title">سفارش شما با موفقیت ثبت شد!</h2>
                <p class="order-confirmation-message">
                    سفارش شما با شماره <strong id="orderNumber">۱۲۳۴۵۶</strong> ثبت شد.<br>
                    همکاران ما در اسرع وقت با شما تماس خواهند گرفت.
                </p>
                <button class="btn btn-primary" id="closeCheckoutAfterConfirm">بستن</button>
            </div>
        </div>
    </div>
    
    <!-- مودال لیست علاقه‌مندی‌ها -->
    <div class="cart-modal" id="wishlistModal">
        <div class="cart-header">
            <h3 class="cart-title">لیست علاقه‌مندی‌ها</h3>
            <button class="close-cart" id="closeWishlist">&times;</button>
        </div>
        <div class="cart-items" id="wishlistItems">
            <!-- آیتم‌های لیست علاقه‌مندی‌ها به صورت پویا اضافه می‌شوند -->
        </div>
    </div>
    
    <!-- مودال جزئیات محصول -->
    <div class="product-modal" id="productModal">
        <div class="product-modal-content">
            <button class="close-product-modal" id="closeProductModal">&times;</button>
            <div class="product-detail-container" id="productDetailContent">
                <!-- جزئیات محصول توسط جاوااسکریپت اضافه می‌شوند -->
            </div>
        </div>
    </div>
    
    <!-- مودال انتخاب حجم -->
    <div class="size-modal" id="sizeModal">
        <div class="size-modal-content">
            <button class="close-size-modal" id="closeSizeModal">&times;</button>
            <h3 class="size-modal-title" id="sizeModalTitle">انتخاب حجم</h3>
            <div class="size-options-modal" id="sizeOptions">
                <!-- گزینه‌های حجم توسط جاوااسکریپت اضافه می‌شوند -->
            </div>
            <button class="add-to-cart-size" id="addToCartSize">افزودن به سبد خرید</button>
        </div>
    </div>
    
    <!-- اوورلی برای مودال‌ها -->
    <div class="overlay" id="overlay"></div>
    
    <!-- اعلان توست -->
    <div class="toast" id="toast"></div>
    
    <!-- پنل مدیریت -->
    <div class="admin-panel" id="adminPanel" style="display: none;">
        <div class="admin-header">
            <h2>پنل مدیریت سفارشات</h2>
            <button class="btn btn-secondary" id="logoutAdmin">خروج</button>
        </div>
        
        <div class="admin-nav">
            <a href="#orders" class="admin-nav-link active">مدیریت سفارشات</a>
            <a href="#products" class="admin-nav-link">مدیریت محصولات</a>
            <a href="#users" class="admin-nav-link">مدیریت کاربران</a>
        </div>
        
        <div class="admin-content">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #f8f9fa;">
                        <th style="padding: 12px; text-align: right;">شماره سفارش</th>
                        <th style="padding: 12px; text-align: right;">مشتری</th>
                        <th style="padding: 12px; text-align: right;">تاریخ</th>
                        <th style="padding: 12px; text-align: right;">مبلغ</th>
                        <th style="padding: 12px; text-align: right;">وضعیت</th>
                        <th style="padding: 12px; text-align: right;">عملیات</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">ORD-789456</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">احسان بهبودنیا</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">۱۴۰۳/۰۲/۱۰</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">۱,۲۵۰,۰۰۰ تومان</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">
                            <select class="status-select">
                                <option value="pending" selected>در انتظار پرداخت</option>
                                <option value="processing">در حال پردازش</option>
                                <option value="shipped">ارسال شده</option>
                                <option value="delivered">تحویل داده شده</option>
                                <option value="cancelled">لغو شده</option>
                            </select>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">
                            <button class="btn btn-primary">ذخیره</button>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">ORD-789457</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">محمد رضایی</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">۱۴۰۳/۰۲/۰۸</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">۸۵۰,۰۰۰ تومان</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">
                            <select class="status-select">
                                <option value="pending">در انتظار پرداخت</option>
                                <option value="processing">در حال پردازش</option>
                                <option value="shipped" selected>ارسال شده</option>
                                <option value="delivered">تحویل داده شده</option>
                                <option value="cancelled">لغو شده</option>
                            </select>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">
                            <button class="btn btn-primary">ذخیره</button>
                        </td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">ORD-789458</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">فاطمه احمدی</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">۱۴۰۳/۰۲/۰۵</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">۱,۵۰۰,۰۰۰ تومان</td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">
                            <select class="status-select">
                                <option value="pending">در انتظار پرداخت</option>
                                <option value="processing" selected>در حال پردازش</option>
                                <option value="shipped">ارسال شده</option>
                                <option value="delivered">تحویل داده شده</option>
                                <option value="cancelled">لغو شده</option>
                            </select>
                        </td>
                        <td style="padding: 12px; border-bottom: 1px solid #eee;">
                            <button class="btn btn-primary">ذخیره</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- اسکریپت‌ها -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    
    <script>
        // پیکربندی Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA-5z_1keyBEMxW-iA2WQK4fAznG10uQ78",
            authDomain: "hamsarperfume-83cb6.firebaseapp.com",
            projectId: "hamsarperfume-83cb6",
            storageBucket: "hamsarperfume-83cb6.firebasestorage.app",
            messagingSenderId: "926272445971",
            appId: "1:926272445971:web:051c76a5ed4af23f1e29e6",
            measurementId: "G-G7QCTQXB8C"
        };
        
        // مقداردهی اولیه Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // پیکربندی Firebase UI
        const uiConfig = {
            signInSuccessUrl: '#',
            signInOptions: [
                firebase.auth.EmailAuthProvider.PROVIDER_ID,
                firebase.auth.GoogleAuthProvider.PROVIDER_ID
            ],
            tosUrl: '#',
            privacyPolicyUrl: '#',
            signInFlow: 'popup',
            credentialHelper: firebaseui.auth.CredentialHelper.NONE,
            callbacks: {
                signInSuccessWithAuthResult: function(authResult, redirectUrl) {
                    // کاربر با موفقیت وارد شد
                    handleAuthStateChanged(authResult.user);
                    return false; // عدم ریدایرکت
                }
            }
        };
        
        // مقداردهی اولیه Firebase UI
        const ui = new firebaseui.auth.AuthUI(auth);
        
        // داده‌های کامل عطرها
        const perfumes = [
            // عطرهای مردانه
            {id: 1, name: "شنل پلاتینیوم", category: "men", image: "assets/image/platinum.jpg", badge: "جدید", price: 170, sizes: [{ size: "ده میل", price: 170 }, { size: "بیست میل", price: 290 }, { size: "سی میل", price: 390 }, { size: "پنجاه میل", price: 650 }], description: "عطری کلاسیک و لوکس با ترکیبی از نت‌های مرکباتی در ابتدا و پایه‌ای از چوب صندل و مشک.", specs: {"برند": "شنل", "نوع رایحه": "مرکباتی – چوبی", "پخش بو": "زیاد"}},
            {id: 2, name: "تایگار", category: "men", image: "assets/image/تایگار.JPG", badge: "پرفروش", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "رایحه‌ای دریایی و تازه با تُن‌های مرکباتی و کمی مشک در پس‌زمینه.", specs: {"برند": "بولگاری", "نوع رایحه": "آبی – مرکباتی", "پخش بو": "زیاد"}},
            {id: 3, name: "مارلی آلتیر", category: "men", image: "assets/image/التیر.jpg", badge: "پرفروش", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "عطری گل‌دار و میوه‌ای با نت‌های یاسمنی در قلب و پایه‌ای خنک از مرکبات.", specs: {"برند": "مارلی", "نوع رایحه": "فلورال – میوه‌ای", "پخش بو": "زیاد"}},
            {id: 4, name: "ایسی میاکی ماجور", category: "men", image: "https://via.placeholder.com/300", badge: "جدید", price: 170, sizes: [{ size: "ده میل", price: 170 }, { size: "بیست میل", price: 290 }, { size: "سی میل", price: 390 }, { size: "پنجاه میل", price: 650 }], description: "الهام‌گرفته از فضای کوهستانی با ترکیبی از نت‌های چوبی و ادویه‌ای.", specs: {"برند": "ایسی میاکی", "نوع رایحه": "چوبی – ادویه‌ای", "پخش بو": "متوسط"}},
            {id: 5, name: "کرید سیلور مانتین", category: "men", image: "assets/image/سیلور.jpg", badge: "ویژه", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "حسی کوهستانی و خنک با غالب‌بودن نت‌های چوبی و کهربایی.", specs: {"برند": "کرید", "نوع رایحه": "چوبی – کهربایی", "پخش بو": "زیاد"}},
            {id: 6, name: "گانیمد", category: "men", image: "assets/image/گانیمد.jpg", badge: "جدید", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "عطری مدرن با نت‌های فلورال در ترکیب با چوب صندل و مشک.", specs: {"برند": "زارجوف", "نوع رایحه": "فلورال – چوبی", "پخش بو": "متوسط"}},
            
            // عطرهای زنانه
            {id: 20, name: "بای کیلیان بلومون", category: "women", image: "assets/image/بلومون2.jpg", price: 170, sizes: [{ size: "ده میل", price: 170 }, { size: "بیست میل", price: 290 }, { size: "سی میل", price: 390 }, { size: "پنجاه میل", price: 650 }], description: "رایحه‌ای گلی-شرقی با تمرکز بر رز و وانیل.", specs: {"برند": "بای کیلیان", "نوع رایحه": "گل‌دار – شرقی", "پخش بو": "متوسط"}},
            {id: 21, name: "بولگاری اکوا امارا", category: "women", image: "https://via.placeholder.com/300", price: 170, sizes: [{ size: "ده میل", price: 170 }, { size: "بیست میل", price: 290 }, { size: "سی میل", price: 390 }, { size: "پنجاه میل", price: 650 }], description: "نت‌های دریایی و مرکباتی با پس‌زمینه چوب صندل.", specs: {"برند": "بولگاری", "نوع رایحه": "آبی – مرکباتی", "پخش بو": "متوسط"}},
            {id: 22, name: "زرجوف اکسنتو", category: "women", image: "https://via.placeholder.com/300", price: 170, sizes: [{ size: "ده میل", price: 170 }, { size: "بیست میل", price: 290 }, { size: "سی میل", price: 390 }, { size: "پنجاه میل", price: 650 }], description: "رایحه‌ای گرم و شرقی با تاکید بر وانیل و چوب صندل.", specs: {"برند": "زارجوف", "نوع رایحه": "شرقی – وانیلی", "پخش بو": "متوسط"}},
            {id: 23, name: "ویکتوریا نایت", category: "women", image: "assets/image/وری-سکسی-نایت.jpg", badge: "جدید", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "حس رمانتیک با ترکیب گل‌های سیاه و وانیل.", specs: {"برند": "ویکتوریا سیکرت", "نوع رایحه": "گل‌دار – شرقی", "پخش بو": "زیاد"}},
            {id: 24, name: "یارا", category: "women", image: "https://via.placeholder.com/300", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "عطری ملایم و گلی با نت‌های یاس و مرکبات.", specs: {"برند": "نامشخص", "نوع رایحه": "گلی – مرکباتی", "پخش بو": "متوسط"}},
            {id: 25, name: "بیلی آیلیش", category: "women", image: "assets/image/بیلی.jpg", badge: "ویژه", price: 250, sizes: [{ size: "ده میل", price: 250 }, { size: "بیست میل", price: 450 }, { size: "سی میل", price: 590 }, { size: "پنجاه میل", price: 950 }], description: "رایحه‌ای مدرن و جوان‌پسند با نت‌های توت و وانیل.", specs: {"برند": "بیلی آیلیش", "نوع رایحه": "میوه‌ای – شرقی", "پخش بو": "متوسط"}},
            
            // عطرهای یونی‌سکس
            {id: 35, name: "آمواج گایدنس", category: "unisex", image: "https://via.placeholder.com/300", price: 190, sizes: [{ size: "ده میل", price: 190 }, { size: "بیست میل", price: 320 }, { size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "حس شرقی-ادویه‌ای با تأکید بر عنبر و مشک.", specs: {"برند": "آمواج", "نوع رایحه": "شرقی – ادویه‌ای", "پخش بو": "متوسط"}},
            {id: 36, name: "لویی ویتون پسفیک چیل", category: "unisex", image: "assets/image/پسفیک.JPG", price: 250, sizes: [{ size: "ده میل", price: 250 }, { size: "بیست میل", price: 450 }, { size: "سی میل", price: 590 }, { size: "پنجاه میل", price: 950 }], description: "حسی گیاهی-مرکباتی با تمرکز بر رزماری و پرتقال.", specs: {"برند": "لویی ویتون", "نوع رایحه": "گیاهی – مرکباتی", "پخش بو": "متوسط"}},
            {id: 37, name: "لویی ویتون لیمنسیت", category: "unisex", image: "https://via.placeholder.com/300", price: 250, sizes: [{ size: "ده میل", price: 250 }, { size: "بیست میل", price: 450 }, { size: "سی میل", price: 590 }, { size: "پنجاه میل", price: 950 }], description: "رایحه‌ای مرکباتی-سبز با نت غالب لیمو.", specs: {"برند": "لویی ویتون", "نوع رایحه": "مرکباتی – سبز", "پخش بو": "متوسط"}},
            {id: 38, name: "فلورنارکوتیک", category: "unisex", image: "https://via.placeholder.com/300", price: 590, sizes: [{ size: "سی میل", price: 590 }, { size: "پنجاه میل", price: 950 }], description: "عطری گل‌دار و میوه‌ای با نت‌های توت و گل‌های بهاری.", specs: {"برند": "فلورنارکوتیک", "نوع رایحه": "گل‌دار – میوه‌ای", "پخش بو": "متوسط"}},
            {id: 39, name: "تیزیانا ترنزی کیرکه", category: "unisex", image: "https://via.placeholder.com/300", price: 430, sizes: [{ size: "سی میل", price: 430 }, { size: "پنجاه میل", price: 700 }], description: "نت‌های شرقی-گلی با تاکید بر رز و عنبر.", specs: {"برند": "تیزیانا ترنزی", "نوع رایحه": "شرقی – گلی", "پخش بو": "زیاد"}},
            {id: 40, name: "کازاموراتی بوکت ایدل", category: "unisex", image: "https://via.placeholder.com/300", price: 590, sizes: [{ size: "سی میل", price: 590 }, { size: "پنجاه میل", price: 950 }], description: "حسی گلی-چوبی با نت‌های مشک و کهربا.", specs: {"برند": "کازاموراتی", "نوع رایحه": "گلی – چوبی", "پخش بو": "زیاد"}}
        ];
  
        // سبد خرید و لیست علاقه‌مندی‌ها
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
        let selectedPerfume = null;
        let selectedSize = null;
        let currentUser = null;
        let currentCheckoutStep = 1;
        let shippingMethod = 'post';
        let shippingCost = 55000;
        let receiptFile = null;
        
        // عناصر DOM
        const menPerfumes = document.getElementById('menPerfumes');
        const womenPerfumes = document.getElementById('womenPerfumes');
        const unisexPerfumes = document.getElementById('unisexPerfumes');
        const mobileMenu = document.getElementById('mobileMenu');
        const hamburger = document.getElementById('hamburger');
        const cartIcon = document.getElementById('cartIcon');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');
        const cartCount = document.getElementById('cartCount');
        const wishlistIcon = document.getElementById('wishlistIcon');
        const wishlistModal = document.getElementById('wishlistModal');
        const closeWishlist = document.getElementById('closeWishlist');
        const wishlistItems = document.getElementById('wishlistItems');
        const wishlistCount = document.getElementById('wishlistCount');
        const mobileWishlistCount = document.getElementById('mobileWishlistCount');
        const mobileCartCount = document.getElementById('mobileCartCount');
        const overlay = document.getElementById('overlay');
        const mobileWishlist = document.getElementById('mobileWishlist');
        const mobileCart = document.getElementById('mobileCart');
        const toast = document.getElementById('toast');
        const productModal = document.getElementById('productModal');
        const closeProductModal = document.getElementById('closeProductModal');
        const productDetailContent = document.getElementById('productDetailContent');
        const sizeModal = document.getElementById('sizeModal');
        const closeSizeModal = document.getElementById('closeSizeModal');
        const sizeModalTitle = document.getElementById('sizeModalTitle');
        const sizeOptions = document.getElementById('sizeOptions');
        const addToCartSize = document.getElementById('addToCartSize');
        const searchIcon = document.getElementById('searchIcon');
        const searchHeader = document.getElementById('searchHeader');
        const closeSearch = document.getElementById('closeSearch');
        const searchInput = document.getElementById('searchInput');
        const searchResults = document.getElementById('searchResults');
        
        // عناصر تکمیل سفارش
        const checkoutModal = document.getElementById('checkoutModal');
        const closeCheckout = document.getElementById('closeCheckout');
        const checkoutButton = document.getElementById('checkoutButton');
        const cancelCheckout = document.getElementById('cancelCheckout');
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        const checkoutProgress = document.getElementById('checkoutProgress');
        const shippingInfoForm = document.getElementById('shippingInfoForm');
        const shippingMethodForm = document.getElementById('shippingMethodForm');
        const paymentForm = document.getElementById('paymentForm');
        const orderConfirmation = document.getElementById('orderConfirmation');
        const nextToShippingMethod = document.getElementById('nextToShippingMethod');
        const backToShippingInfo = document.getElementById('backToShippingInfo');
        const nextToPayment = document.getElementById('nextToPayment');
        const backToShippingMethod = document.getElementById('backToShippingMethod');
        const completeOrder = document.getElementById('completeOrder');
        const closeCheckoutAfterConfirm = document.getElementById('closeCheckoutAfterConfirm');
        const fullName = document.getElementById('fullName');
        const phoneNumber = document.getElementById('phoneNumber');
        const provinceSelect = document.getElementById('province');
        const citySelect = document.getElementById('city');
        const address = document.getElementById('address');
        const postalCode = document.getElementById('postalCode');
        const orderNotes = document.getElementById('orderNotes');
        const shippingMethod1 = document.getElementById('shippingMethod1');
        const shippingMethod2 = document.getElementById('shippingMethod2');
        const checkoutCartTotal = document.getElementById('checkoutCartTotal');
        const checkoutShippingCost = document.getElementById('checkoutShippingCost');
        const checkoutFinalTotal = document.getElementById('checkoutFinalTotal');
        const paymentAmount = document.getElementById('paymentAmount');
        const receiptImage = document.getElementById('receiptImage');
        const fileName = document.getElementById('fileName');
        const reviewFullName = document.getElementById('reviewFullName');
        const reviewPhoneNumber = document.getElementById('reviewPhoneNumber');
        const reviewAddress = document.getElementById('reviewAddress');
        const reviewShippingMethod = document.getElementById('reviewShippingMethod');
        const reviewProducts = document.getElementById('reviewProducts');
        const orderNumber = document.getElementById('orderNumber');
        
        // عناصر احراز هویت
        const authModal = document.getElementById('authModal');
        const closeAuthModal = document.getElementById('closeAuthModal');
        const loginBtn = document.getElementById('loginBtn');
        const userDropdown = document.getElementById('userDropdown');
        const userAvatar = document.getElementById('userAvatar');
        const profileLink = document.getElementById('profileLink');
        const ordersLink = document.getElementById('ordersLink');
        const logoutLink = document.getElementById('logoutLink');
        const authTabs = document.querySelectorAll('.auth-tab');
        const loginForm = document.getElementById('loginForm');
        const registerForm = document.getElementById('registerForm');
        const loginButton = document.getElementById('loginButton');
        const registerButton = document.getElementById('registerButton');
        const showRegister = document.getElementById('showRegister');
        const showLogin = document.getElementById('showLogin');
        const googleLogin = document.getElementById('googleLogin');
        const googleRegister = document.getElementById('googleRegister');
        const mobileProfile = document.getElementById('mobileProfile');
        const mobileOrders = document.getElementById('mobileOrders');
        const mobileLogout = document.getElementById('mobileLogout');
        const mobileLogin = document.getElementById('mobileLogin');
        
        // لیست استان‌ها و شهرهای ایران
        const iranProvinces = {
            'تهران': ['تهران', 'شهریار', 'اسلامشهر', 'ورامین', 'پاکدشت'],
            'اصفهان': ['اصفهان', 'کاشان', 'خمینی‌شهر', 'نجف‌آباد', 'شاهین‌شهر'],
            'فارس': ['شیراز', 'مرودشت', 'کازرون', 'جهرم', 'فسا'],
            'خراسان رضوی': ['مشهد', 'نیشابور', 'سبزوار', 'تربت حیدریه', 'قوچان'],
            'آذربایجان شرقی': ['تبریز', 'مراغه', 'مرند', 'اهر', 'میانه'],
            'مازندران': ['ساری', 'بابل', 'آمل', 'قائم‌شهر', 'نور'],
            'البرز': ['کرج', 'هشتگرد', 'نظرآباد', 'طالقان', 'اشتهارد'],
            'گیلان': ['رشت', 'انزلی', 'لاهیجان', 'آستارا', 'تالش'],
            'خوزستان': ['اهواز', 'دزفول', 'آبادان', 'خرمشهر', 'شوشتر'],
            'کرمان': ['کرمان', 'رفسنجان', 'سیرجان', 'بم', 'جیرفت'],
            'آذربایجان غربی': ['ارومیه', 'خوی', 'مهاباد', 'میاندوآب', 'سلماس'],
            'مرکزی': ['اراک', 'ساوه', 'خمین', 'محلات', 'شازند'],
            'همدان': ['همدان', 'ملایر', 'نهاوند', 'تویسرکان', 'کبودرآهنگ'],
            'قم': ['قم'],
            'کردستان': ['سنندج', 'سقز', 'مریوان', 'بانه', 'قروه'],
            'لرستان': ['خرم‌آباد', 'بروجرد', 'دورود', 'کوهدشت', 'الیگودرز'],
            'زنجان': ['زنجان', 'ابهر', 'خرمدره', 'قیدار', 'خدابنده'],
            'سیستان و بلوچستان': ['زاهدان', 'ایرانشهر', 'چابهار', 'زابل', 'سراوان'],
            'کرمانشاه': ['کرمانشاه', 'اسلام‌آباد غرب', 'پاوه', 'هرسین', 'کنگاور'],
            'کهگیلویه و بویراحمد': ['یاسوج', 'گچساران', 'دنا', 'سی سخت', 'لنده'],
            'گلستان': ['گرگان', 'گنبد کاووس', 'علی‌آباد', 'مینودشت', 'آزادشهر'],
            'ایلام': ['ایلام', 'ایوان', 'دهلران', 'مهران', 'دره‌شهر'],
            'چهارمحال و بختیاری': ['شهرکرد', 'بروجن', 'فرخشهر', 'لردگان', 'اردل'],
            'خراسان شمالی': ['بجنورد', 'شیروان', 'اسفراین', 'فاروج', 'جاجرم'],
            'خراسان جنوبی': ['بیرجند', 'قاین', 'فردوس', 'نهبندان', 'سرایان'],
            'اردبیل': ['اردبیل', 'مشگین‌شهر', 'پارس‌آباد', 'خلخال', 'گرمی'],
            'بوشهر': ['بوشهر', 'برازجان', 'خارک', 'کنگان', 'جم'],
            'سمنان': ['سمنان', 'شاهرود', 'دامغان', 'گرمسار', 'مهدی‌شهر'],
            'هرمزگان': ['بندرعباس', 'قشم', 'میناب', 'بندرلنگه', 'کیش'],
            'یزد': ['یزد', 'میبد', 'اردکان', 'بافق', 'تفت'],
            'هرمزگان': ['بندرعباس', 'قشم', 'میناب', 'بندرلنگه', 'کیش'],
            'یزد': ['یزد', 'میبد', 'اردکان', 'بافق', 'تفت'],
            'هرمزگان': ['بندرعباس', 'قشم', 'میناب', 'بندرلنگه', 'کیش'],
            'یزد': ['یزد', 'میبد', 'اردکان', 'بافق', 'تفت']
        };
        
        // تولید کارت‌های محصولات
        function generateProductCards() {
            menPerfumes.innerHTML = '';
            womenPerfumes.innerHTML = '';
            unisexPerfumes.innerHTML = '';
            
            perfumes.forEach(perfume => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                // یافتن قیمت پایه (10ml)
                const basePrice = perfume.sizes[0].price;
                
                productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${perfume.image}" alt="${perfume.name}">
                        ${perfume.badge ? `<span class="product-badge">${perfume.badge}</span>` : ''}
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${perfume.name}</h3>
                        
                        <div class="product-bottom">
                            <div class="product-price">${basePrice.toLocaleString('fa')},۰۰۰ تومان</div>
                            <div class="product-actions">
                                <button class="action-btn wishlist-btn">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="action-btn add-to-cart-btn">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                // افزودن به سبد خرید بدون نیاز به ورود
                const addToCartBtn = productCard.querySelector('.add-to-cart-btn');
                addToCartBtn.addEventListener('click', () => {
                    openSizeModal(perfume);
                });
                
                // لیست علاقه‌مندی‌ها
                const wishlistBtn = productCard.querySelector('.wishlist-btn');
                const isInWishlist = wishlist.some(item => item.id === perfume.id);
                if (isInWishlist) {
                    wishlistBtn.innerHTML = '<i class="fas fa-heart"></i>';
                    wishlistBtn.style.color = 'var(--accent)';
                }
                
                wishlistBtn.addEventListener('click', () => {
                    toggleWishlist(perfume, wishlistBtn);
                });
                
                // عنوان و تصویر محصول برای جزئیات
                const productTitle = productCard.querySelector('.product-title');
                const productImage = productCard.querySelector('.product-image');
                
                productTitle.addEventListener('click', () => {
                    showProductDetails(perfume);
                });
                
                productImage.addEventListener('click', () => {
                    showProductDetails(perfume);
                });
                
                // افزودن به دسته‌بندی مناسب
                if (perfume.category === 'men') {
                    menPerfumes.appendChild(productCard);
                } else if (perfume.category === 'women') {
                    womenPerfumes.appendChild(productCard);
                } else {
                    unisexPerfumes.appendChild(productCard);
                }
            });
        }
        
        // باز کردن مودال انتخاب حجم
        function openSizeModal(perfume) {
            selectedPerfume = perfume;
            selectedSize = null;
            
            sizeModalTitle.textContent = perfume.name;
            sizeOptions.innerHTML = '';
            
            perfume.sizes.forEach(size => {
                const sizeOption = document.createElement('div');
                sizeOption.className = 'size-option-modal';
                sizeOption.dataset.size = size.size;
                sizeOption.dataset.price = size.price;
                sizeOption.innerHTML = `
                    <span>${size.size}</span>
                    <span class="size-price-modal">${size.price.toLocaleString('fa')},۰۰۰ تومان</span>
                `;
                
                sizeOption.addEventListener('click', () => {
                    document.querySelectorAll('.size-option-modal').forEach(opt => {
                        opt.classList.remove('active');
                    });
                    sizeOption.classList.add('active');
                    selectedSize = size;
                });
                
                sizeOptions.appendChild(sizeOption);
            });
            
            sizeModal.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // افزودن به سبد خرید از مودال اندازه
        addToCartSize.addEventListener('click', () => {
            if (!selectedPerfume || !selectedSize) {
                showToast('لطفاً حجم مورد نظر را انتخاب کنید');
                return;
            }
            
            addToCart(selectedPerfume, selectedSize.size, selectedSize.price);
            sizeModal.classList.remove('active');
        });
        
        // بستن مودال اندازه
        closeSizeModal.addEventListener('click', () => {
            sizeModal.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // افزودن به سبد خرید
        function addToCart(perfume, size, price) {
            const existingItem = cart.find(item => 
                item.id === perfume.id && item.size === size
            );
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: perfume.id,
                    name: perfume.name,
                    size: size,
                    price: price,
                    image: perfume.image,
                    quantity: 1
                });
            }
            
            saveCart();
            updateCartCount();
            showToast('محصول به سبد خرید اضافه شد!');
        }
        
        // تغییر لیست علاقه‌مندی‌ها
        function toggleWishlist(perfume, button) {
            const index = wishlist.findIndex(item => item.id === perfume.id);
            
            if (index === -1) {
                wishlist.push({
                    id: perfume.id,
                    name: perfume.name,
                    price: perfume.price,
                    image: perfume.image
                });
                button.innerHTML = '<i class="fas fa-heart"></i>';
                button.style.color = 'var(--accent)';
                showToast('به لیست علاقه‌مندی‌ها اضافه شد');
            } else {
                wishlist.splice(index, 1);
                button.innerHTML = '<i class="far fa-heart"></i>';
                button.style.color = '';
                showToast('از لیست علاقه‌مندی‌ها حذف شد');
            }
            
            saveWishlist();
            updateWishlistCount();
        }
        
        // ذخیره سبد خرید در localStorage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }
        
        // ذخیره لیست علاقه‌مندی‌ها در localStorage
        function saveWishlist() {
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
        }
        
        // به‌روزرسانی تعداد سبد خرید
        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = count;
            mobileCartCount.textContent = count;
        }
        
        // به‌روزرسانی تعداد لیست علاقه‌مندی‌ها
        function updateWishlistCount() {
            wishlistCount.textContent = wishlist.length;
            mobileWishlistCount.textContent = wishlist.length;
        }
        
        // نمایش اعلان توست
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // به‌روزرسانی رابط کاربری سبد خرید
        function updateCartUI() {
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div style="text-align: center; padding: 30px; color: #777;">سبد خرید شما خالی است</div>';
                cartTotal.textContent = '۰ تومان';
                return;
            }
            
            let total = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-size">حجم: ${item.size}</div>
                        <div class="cart-item-price">${itemTotal.toLocaleString('fa')},۰۰۰ تومان</div>
                    </div>
                    <button class="cart-item-remove" data-index="${index}">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            // به‌روزرسانی مجموع
            cartTotal.textContent = total.toLocaleString('fa') + ',۰۰۰ تومان';
            
            // افزودن رویداد به دکمه‌های حذف
            document.querySelectorAll('.cart-item-remove').forEach(button => {
                button.addEventListener('click', () => {
                    const index = parseInt(button.dataset.index);
                    cart.splice(index, 1);
                    saveCart();
                    updateCartCount();
                    updateCartUI();
                    showToast('محصول از سبد خرید حذف شد');
                });
            });
        }
        
        // به‌روزرسانی رابط کاربری لیست علاقه‌مندی‌ها
        function updateWishlistUI() {
            wishlistItems.innerHTML = '';
            
            if (wishlist.length === 0) {
                wishlistItems.innerHTML = '<div style="text-align: center; padding: 30px; color: #777;">لیست علاقه‌مندی‌های شما خالی است</div>';
                return;
            }
            
            wishlist.forEach((item, index) => {
                const wishlistItem = document.createElement('div');
                wishlistItem.className = 'cart-item';
                wishlistItem.innerHTML = `
                    <div class="cart-item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${item.price.toLocaleString('fa')},۰۰۰ تومان</div>
                    </div>
                    <button class="cart-item-remove" data-index="${index}">
                        <i class="fas fa-trash"></i>
                    </button>
                `;
                
                wishlistItems.appendChild(wishlistItem);
            });
            
            // افزودن رویداد به دکمه‌های حذف
            document.querySelectorAll('.cart-item-remove').forEach(button => {
                button.addEventListener('click', () => {
                    const index = parseInt(button.dataset.index);
                    wishlist.splice(index, 1);
                    saveWishlist();
                    updateWishlistCount();
                    updateWishlistUI();
                    showToast('محصول از لیست علاقه‌مندی‌ها حذف شد');
                    generateProductCards(); // به‌روزرسانی آیکون‌های قلب
                });
            });
        }
        
        // نمایش جزئیات محصول
        function showProductDetails(perfume) {
            // تولید گزینه‌های اندازه برای مودال جزئیات
            let sizeOptionsHTML = '';
            perfume.sizes.forEach(size => {
                sizeOptionsHTML += `
                    <div class="size-option-detail" data-size="${size.size}" data-price="${size.price}">
                        <span>${size.size}</span>
                        <span class="size-price">${size.price.toLocaleString('fa')},۰۰۰ تومان</span>
                    </div>
                `;
            });
            
            // تولید مشخصات
            let specsHTML = '';
            for (const [key, value] of Object.entries(perfume.specs)) {
                specsHTML += `
                    <div class="spec-item">
                        <div class="spec-title">${key}:</div>
                        <div class="spec-value">${value}</div>
                    </div>
                `;
            }
            
            productDetailContent.innerHTML = `
                <div class="product-detail-image">
                    <img src="${perfume.image}" alt="${perfume.name}">
                </div>
                <div class="product-detail-info">
                    <h2 class="product-detail-title">${perfume.name}</h2>
                    <div class="product-detail-price">${perfume.sizes[0].price.toLocaleString('fa')},۰۰۰ تومان</div>
                    
                    <div class="product-detail-description">
                        <p>${perfume.description}</p>
                    </div>
                    
                    <div class="product-detail-specs">
                        ${specsHTML}
                    </div>
                    
                    <div class="product-detail-sizes">
                        <h3>حجم محصول:</h3>
                        <div class="size-grid">
                            ${sizeOptionsHTML}
                        </div>
                    </div>
                    
                    <div class="product-detail-actions">
                        <button class="add-to-cart-detail">
                            <i class="fas fa-shopping-cart"></i> افزودن به سبد خرید
                        </button>
                        <button class="wishlist-btn-detail">
                            <i class="far fa-heart"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // افزودن رویداد به گزینه‌های اندازه در مودال
            const sizeOptions = productDetailContent.querySelectorAll('.size-option-detail');
            const priceElement = productDetailContent.querySelector('.product-detail-price');
            
            sizeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    // حذف کلاس انتخاب شده از همه گزینه‌ها
                    sizeOptions.forEach(opt => opt.classList.remove('active'));
                    
                    // افزودن کلاس انتخاب شده به گزینه کلیک شده
                    option.classList.add('active');
                    
                    // به‌روزرسانی قیمت
                    priceElement.textContent = `${parseInt(option.dataset.price).toLocaleString('fa')},۰۰۰ تومان`;
                });
            });
            
            // دکمه افزودن به سبد خرید در مودال جزئیات
            const addToCartBtn = productDetailContent.querySelector('.add-to-cart-detail');
            addToCartBtn.addEventListener('click', () => {
                const selectedSize = productDetailContent.querySelector('.size-option-detail.active');
                if (selectedSize) {
                    const size = selectedSize.dataset.size;
                    const price = parseInt(selectedSize.dataset.price);
                    addToCart(perfume, size, price);
                    showToast('محصول به سبد خرید اضافه شد!');
                } else {
                    showToast('لطفاً حجم مورد نظر را انتخاب کنید');
                }
            });
            
            // دکمه لیست علاقه‌مندی‌ها در مودال جزئیات
            const wishlistBtn = productDetailContent.querySelector('.wishlist-btn-detail');
            const isInWishlist = wishlist.some(item => item.id === perfume.id);
            if (isInWishlist) {
                wishlistBtn.classList.add('active');
                wishlistBtn.innerHTML = '<i class="fas fa-heart"></i>';
            }
            
            wishlistBtn.addEventListener('click', () => {
                toggleWishlist(perfume, wishlistBtn);
                if (wishlistBtn.classList.contains('active')) {
                    wishlistBtn.innerHTML = '<i class="fas fa-heart"></i>';
                } else {
                    wishlistBtn.innerHTML = '<i class="far fa-heart"></i>';
                }
            });
            
            // نمایش مودال
            productModal.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        // راه‌اندازی جستجو
        function setupSearch() {
            searchIcon.addEventListener('click', () => {
                searchHeader.classList.add('active');
                searchInput.focus();
                document.body.style.overflow = 'hidden';
            });
            
            closeSearch.addEventListener('click', () => {
                searchHeader.classList.remove('active');
                document.body.style.overflow = '';
            });
            
            searchInput.addEventListener('input', () => {
                const query = searchInput.value.trim();
                searchResults.innerHTML = '';
                
                if (query.length < 2) {
                    searchResults.style.display = 'none';
                    return;
                }
                
                const results = perfumes.filter(perfume => 
                    perfume.name.toLowerCase().includes(query.toLowerCase())
                );
                
                if (results.length === 0) {
                    searchResults.innerHTML = '<div style="padding: 20px; text-align: center; color: #777;">محصولی یافت نشد</div>';
                    searchResults.style.display = 'block';
                    return;
                }
                
                results.forEach(perfume => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    resultItem.innerHTML = `
                        <img src="${perfume.image}" alt="${perfume.name}" class="search-result-image">
                        <div>
                            <div class="search-result-name">${perfume.name}</div>
                            <div class="search-result-category">${perfume.category === 'men' ? 'عطر مردانه' : perfume.category === 'women' ? 'عطر زنانه' : 'یونی‌سکس'}</div>
                        </div>
                    `;
                    
                    resultItem.addEventListener('click', () => {
                        showProductDetails(perfume);
                        searchHeader.classList.remove('active');
                        document.body.style.overflow = '';
                    });
                    
                    searchResults.appendChild(resultItem);
                });
                
                searchResults.style.display = 'block';
            });
        }
        
        // مدیریت تغییر وضعیت احراز هویت
        function handleAuthStateChanged(user) {
            currentUser = user;
            
            if (user) {
                // کاربر وارد شده است
                loginBtn.style.display = 'none';
                userDropdown.style.display = 'block';
                mobileLogin.style.display = 'none';
                mobileProfile.style.display = 'flex';
                mobileOrders.style.display = 'flex';
                mobileLogout.style.display = 'flex';
                
                // به‌روزرسانی آواتار کاربر
                if (user.photoURL) {
                    userAvatar.src = user.photoURL;
                } else {
                    // آواتار پیش‌فرض با حرف اول نام نمایشی
                    const name = user.displayName || 'کاربر';
                    userAvatar.src = `https://ui-avatars.com/api/?name=${name}&background=random&color=fff`;
                }
                
                // بستن مودال احراز هویت
                authModal.classList.remove('active');
                overlay.classList.remove('active');
                
                showToast(`خوش آمدید ${user.displayName || 'کاربر'}!`);
            } else {
                // کاربر خارج شده است
                loginBtn.style.display = 'block';
                userDropdown.style.display = 'none';
                mobileLogin.style.display = 'flex';
                mobileProfile.style.display = 'none';
                mobileOrders.style.display = 'none';
                mobileLogout.style.display = 'none';
            }
        }
        
        // خروج کاربر
        function signOut() {
            auth.signOut().then(() => {
                showToast('با موفقیت خارج شدید');
            }).catch((error) => {
                showToast('خطا در خروج از حساب');
                console.error(error);
            });
        }
        
        // راه‌اندازی استان‌ها و شهرها
        function setupProvinceCity() {
            // پاک کردن گزینه‌های موجود
            provinceSelect.innerHTML = '<option value="">انتخاب استان</option>';
            citySelect.innerHTML = '<option value="">ابتدا استان را انتخاب کنید</option>';
            
            // افزودن استان‌ها
            Object.keys(iranProvinces).forEach(province => {
                const option = document.createElement('option');
                option.value = province;
                option.textContent = province;
                provinceSelect.appendChild(option);
            });
            
            // افزودن رویداد تغییر استان
            provinceSelect.addEventListener('change', () => {
                const selectedProvince = provinceSelect.value;
                citySelect.innerHTML = '<option value="">انتخاب شهر</option>';
                citySelect.disabled = !selectedProvince;
                
                if (selectedProvince) {
                    iranProvinces[selectedProvince].forEach(city => {
                        const option = document.createElement('option');
                        option.value = city;
                        option.textContent = city;
                        citySelect.appendChild(option);
                    });
                }
            });
        }
        
        // مدیریت مراحل تکمیل سفارش
        function startCheckout() {
            if (cart.length === 0) {
                showToast('سبد خرید شما خالی است');
                return;
            }
            
            if (!currentUser) {
                showToast('لطفاً ابتدا وارد حساب کاربری خود شوید');
                authModal.classList.add('active');
                overlay.classList.add('active');
                return;
            }
            
            // محاسبه مجموع
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            checkoutCartTotal.textContent = total.toLocaleString('fa') + ',۰۰۰ تومان';
            checkoutShippingCost.textContent = '۰ تومان';
            checkoutFinalTotal.textContent = total.toLocaleString('fa') + ',۰۰۰ تومان';
            paymentAmount.textContent = total.toLocaleString('fa') + ',۰۰۰ تومان';
            
            // بازنشانی مراحل
            currentCheckoutStep = 1;
            updateCheckoutSteps();
            
            // نمایش مودال تکمیل سفارش
            cartModal.classList.remove('open');
            checkoutModal.classList.add('open');
        }
        
        // به‌روزرسانی مراحل تکمیل سفارش
        function updateCheckoutSteps() {
            // بازنشانی همه مراحل
            step1.classList.remove('completed', 'active');
            step2.classList.remove('completed', 'active');
            step3.classList.remove('completed', 'active');
            
            // مخفی کردن همه فرم‌ها
            shippingInfoForm.classList.remove('active');
            shippingMethodForm.classList.remove('active');
            paymentForm.classList.remove('active');
            orderConfirmation.classList.remove('active');
            
            // به‌روزرسانی پیشرفت بر اساس مرحله فعلی
            if (currentCheckoutStep === 1) {
                step1.classList.add('active');
                checkoutProgress.style.width = '0%';
                shippingInfoForm.classList.add('active');
            } else if (currentCheckoutStep === 2) {
                step1.classList.add('completed');
                step2.classList.add('active');
                checkoutProgress.style.width = '50%';
                shippingMethodForm.classList.add('active');
            } else if (currentCheckoutStep === 3) {
                step1.classList.add('completed');
                step2.classList.add('completed');
                step3.classList.add('active');
                checkoutProgress.style.width = '100%';
                paymentForm.classList.add('active');
                
                // به‌روزرسانی اطلاعات بررسی
                reviewFullName.textContent = fullName.value;
                reviewPhoneNumber.textContent = phoneNumber.value;
                reviewAddress.textContent = `${provinceSelect.value}، ${citySelect.value}، ${address.value}`;
                reviewShippingMethod.textContent = shippingMethod === 'post' ? 'پست پیشتاز' : 'ماهکس (پس کرایه)';
                
                // به‌روزرسانی محصولات
                reviewProducts.innerHTML = '';
                cart.forEach(item => {
                    const productDiv = document.createElement('div');
                    productDiv.textContent = `${item.name} (${item.size}) - ${item.quantity} عدد`;
                    reviewProducts.appendChild(productDiv);
                });
            }
        }
        
        // اعتبارسنجی اطلاعات ارسال
        function validateShippingInfo() {
            if (!fullName.value.trim()) {
                showToast('لطفاً نام گیرنده را وارد کنید');
                return false;
            }
            
            if (!phoneNumber.value.trim() || !/^09\d{9}$/.test(phoneNumber.value)) {
                showToast('لطفاً شماره تماس معتبر وارد کنید');
                return false;
            }
            
            if (!provinceSelect.value) {
                showToast('لطفاً استان را انتخاب کنید');
                return false;
            }
            
            if (!citySelect.value) {
                showToast('لطفاً شهر را انتخاب کنید');
                return false;
            }
            
            if (!address.value.trim()) {
                showToast('لطفاً آدرس کامل را وارد کنید');
                return false;
            }
            
            if (!postalCode.value.trim() || !/^\d{10}$/.test(postalCode.value)) {
                showToast('لطفاً کد پستی ۱۰ رقمی معتبر وارد کنید');
                return false;
            }
            
            return true;
        }
        
        // تکمیل فرآیند سفارش
        function completeOrderProcess() {
            // تولید شماره سفارش
            const orderNum = 'ORD-' + Date.now().toString().slice(-6);
            orderNumber.textContent = orderNum;
            
            // محاسبه مجموع
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const total = subtotal + shippingCost;
            
            // ایجاد شیء سفارش
            const order = {
                orderNumber: orderNum,
                userId: currentUser.uid,
                userEmail: currentUser.email,
                userName: currentUser.displayName || fullName.value,
                userPhone: phoneNumber.value,
                shippingInfo: {
                    fullName: fullName.value,
                    phone: phoneNumber.value,
                    province: provinceSelect.value,
                    city: citySelect.value,
                    address: address.value,
                    postalCode: postalCode.value,
                    notes: orderNotes.value,
                    method: shippingMethod,
                    cost: shippingMethod === 'post' ? 55000 : 0
                },
                items: cart,
                subtotal: subtotal,
                total: total,
                status: 'pending',
                createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                receiptImage: receiptFile ? receiptFile.name : null
            };
            
            // ذخیره سفارش در Firestore
            db.collection('orders').add(order)
                .then(() => {
                    // نمایش تاییدیه
                    currentCheckoutStep = 4;
                    updateCheckoutSteps();
                    orderConfirmation.classList.add('active');
                    
                    // پاک کردن سبد خرید
                    cart = [];
                    saveCart();
                    updateCartCount();
                    
                    // ارسال ایمیل
                    sendOrderEmail(order);
                })
                .catch(error => {
                    console.error('خطا در ثبت سفارش:', error);
                    showToast('خطا در ثبت سفارش. لطفاً دوباره تلاش کنید');
                });
        }
        
        // ارسال ایمیل سفارش
        function sendOrderEmail(order) {
            // در اینجا باید از EmailJS برای ارسال ایمیل استفاده کنید
            // این بخش نیاز به پیاده‌سازی با استفاده از API EmailJS دارد
            console.log('ارسال ایمیل برای سفارش:', order);
            showToast('جزئیات سفارش به ایمیل مدیریت ارسال شد');
        }
        
        // رویدادها
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            overlay.classList.toggle('active');
            document.body.style.overflow = 'hidden';
        });
        
        cartIcon.addEventListener('click', () => {
            cartModal.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            updateCartUI();
        });
        
        closeCart.addEventListener('click', () => {
            cartModal.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        wishlistIcon.addEventListener('click', () => {
            wishlistModal.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            updateWishlistUI();
        });
        
        closeWishlist.addEventListener('click', () => {
            wishlistModal.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        mobileWishlist.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            wishlistModal.classList.add('open');
            updateWishlistUI();
        });
        
        mobileCart.addEventListener('click', () => {
            mobileMenu.classList.remove('active');
            overlay.classList.remove('active');
            cartModal.classList.add('open');
            updateCartUI();
        });
        
        overlay.addEventListener('click', () => {
            hamburger.classList.remove('active');
            mobileMenu.classList.remove('active');
            cartModal.classList.remove('open');
            wishlistModal.classList.remove('open');
            productModal.classList.remove('active');
            sizeModal.classList.remove('active');
            checkoutModal.classList.remove('open');
            searchHeader.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // بستن مودال محصول
        closeProductModal.addEventListener('click', () => {
            productModal.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // بستن مودال محصول با کلیک خارج از آن
        productModal.addEventListener('click', (e) => {
            if (e.target === productModal) {
                productModal.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
            }
        });
        
        // دکمه تکمیل سفارش
        checkoutButton.addEventListener('click', startCheckout);
        
        // لغو تکمیل سفارش
        cancelCheckout.addEventListener('click', () => {
            checkoutModal.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // بعدی به روش ارسال
        nextToShippingMethod.addEventListener('click', () => {
            if (validateShippingInfo()) {
                currentCheckoutStep = 2;
                updateCheckoutSteps();
            }
        });
        
        // بازگشت به اطلاعات ارسال
        backToShippingInfo.addEventListener('click', () => {
            currentCheckoutStep = 1;
            updateCheckoutSteps();
        });
        
        // بعدی به پرداخت
        nextToPayment.addEventListener('click', () => {
            // به‌روزرسانی روش ارسال
            shippingMethod = shippingMethod1.checked ? 'post' : 'mahax';
            shippingCost = shippingMethod === 'post' ? 55000 : 0;
            
            // به‌روزرسانی مجموع
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            checkoutShippingCost.textContent = shippingCost.toLocaleString('fa') + ',۰۰۰ تومان';
            checkoutFinalTotal.textContent = (subtotal + shippingCost).toLocaleString('fa') + ',۰۰۰ تومان';
            paymentAmount.textContent = (subtotal + shippingCost).toLocaleString('fa') + ',۰۰۰ تومان';
            
            currentCheckoutStep = 3;
            updateCheckoutSteps();
        });
        
        // بازگشت به روش ارسال
        backToShippingMethod.addEventListener('click', () => {
            currentCheckoutStep = 2;
            updateCheckoutSteps();
        });
        
        // تکمیل سفارش
        completeOrder.addEventListener('click', completeOrderProcess);
        
        // بستن پس از تایید سفارش
        closeCheckoutAfterConfirm.addEventListener('click', () => {
            checkoutModal.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // آپلود فایل
        receiptImage.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                receiptFile = e.target.files[0];
                fileName.textContent = receiptFile.name;
            }
        });
        
        // انتخاب روش ارسال
        shippingMethod1.addEventListener('change', () => {
            if (shippingMethod1.checked) {
                shippingMethod = 'post';
                shippingCost = 55000;
                
                // به‌روزرسانی مجموع
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                checkoutShippingCost.textContent = shippingCost.toLocaleString('fa') + ',۰۰۰ تومان';
                checkoutFinalTotal.textContent = (subtotal + shippingCost).toLocaleString('fa') + ',۰۰۰ تومان';
            }
        });
        
        shippingMethod2.addEventListener('change', () => {
            if (shippingMethod2.checked) {
                shippingMethod = 'mahax';
                shippingCost = 0;
                
                // به‌روزرسانی مجموع
                const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                checkoutShippingCost.textContent = 'پس کرایه';
                checkoutFinalTotal.textContent = subtotal.toLocaleString('fa') + ',۰۰۰ تومان';
            }
        });
        
        // نمایش مودال احراز هویت
        loginBtn.addEventListener('click', () => {
            authModal.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        
        closeAuthModal.addEventListener('click', () => {
            authModal.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
        });
        
        // تغییر بین تب‌های ورود و ثبت‌نام
        authTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.dataset.tab;
                
                authTabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                loginForm.style.display = 'none';
                registerForm.style.display = 'none';
                
                if (tabId === 'login') {
                    loginForm.style.display = 'block';
                } else {
                    registerForm.style.display = 'block';
                }
            });
        });
        
        // نمایش فرم ثبت‌نام
        showRegister.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('.auth-tab[data-tab="register"]').click();
        });
        
        // نمایش فرم ورود
        showLogin.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('.auth-tab[data-tab="login"]').click();
        });
        
        // ورود با ایمیل/رمز عبور
        loginButton.addEventListener('click', () => {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showToast('لطفاً ایمیل و رمز عبور را وارد کنید');
                return;
            }
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // در تغییر وضعیت احراز هویت مدیریت می‌شود
                })
                .catch((error) => {
                    showToast('خطا در ورود: ' + error.message);
                });
        });
        
        // ثبت‌نام با ایمیل/رمز عبور
        registerButton.addEventListener('click', () => {
            const name = document.getElementById('registerName').value;
            const phone = document.getElementById('registerPhone').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (!name || !phone || !email || !password || !confirmPassword) {
                showToast('لطفاً تمام فیلدها را پر کنید');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('رمز عبور و تکرار آن مطابقت ندارند');
                return;
            }
            
            if (password.length < 6) {
                showToast('رمز عبور باید حداقل ۶ کاراکتر باشد');
                return;
            }
            
            if (!/^09\d{9}$/.test(phone)) {
                showToast('لطفاً شماره تماس معتبر وارد کنید');
                return;
            }
            
            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // به‌روزرسانی پروفایل کاربر
                    return userCredential.user.updateProfile({
                        displayName: name
                    });
                })
                .then(() => {
                    showToast('حساب کاربری با موفقیت ایجاد شد!');
                    document.querySelector('.auth-tab[data-tab="login"]').click();
                })
                .catch((error) => {
                    showToast('خطا در ثبت‌نام: ' + error.message);
                });
        });
        
        // ورود با گوگل
        googleLogin.addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    // در تغییر وضعیت احراز هویت مدیریت می‌شود
                })
                .catch((error) => {
                    showToast('خطا در ورود با گوگل: ' + error.message);
                });
        });
        
        // ثبت‌نام با گوگل
        googleRegister.addEventListener('click', () => {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    // در تغییر وضعیت احراز هویت مدیریت می‌شود
                })
                .catch((error) => {
                    showToast('خطا در ثبت‌نام با گوگل: ' + error.message);
                });
        });
        
        // خروج
        logoutLink.addEventListener('click', (e) => {
            e.preventDefault();
            signOut();
        });
        
        mobileLogout.addEventListener('click', (e) => {
            e.preventDefault();
            signOut();
        });
        
        // پروفایل کاربر
        profileLink.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('#profile').style.display = 'block';
            document.querySelector('#orders').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        mobileProfile.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('#profile').style.display = 'block';
            document.querySelector('#orders').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // سفارشات کاربر
        ordersLink.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('#orders').style.display = 'block';
            document.querySelector('#profile').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        mobileOrders.addEventListener('click', (e) => {
            e.preventDefault();
            document.querySelector('#orders').style.display = 'block';
            document.querySelector('#profile').style.display = 'none';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
        
        // کپی شماره کارت
        function copyCardNumber() {
            const textarea = document.createElement('textarea');
            textarea.value = '6219861902731925';
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            showToast('شماره کارت کپی شد!');
        }
        
        // مقداردهی اولیه صفحه
        function init() {
            generateProductCards();
            updateCartCount();
            updateWishlistCount();
            setupSearch();
            setupProvinceCity();
            
            // تنظیم شنونده وضعیت احراز هویت
            auth.onAuthStateChanged(handleAuthStateChanged);
            
            // اسکرول نرم برای لینک‌های لنگر
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        window.scrollTo({
                            top: target.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            });
        }
        
        // مقداردهی اولیه هنگام بارگیری صفحه
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
