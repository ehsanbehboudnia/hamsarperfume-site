<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>همسر پرفیوم - فروشگاه تخصصی عطرهای لاکچری</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        /* متغیرهای CSS */
        :root {
            --primary: #1a1a2e;
            --secondary: #2d4263;
            --accent: #c84b31;
            --accent-light: #d66853;
            --light: #f8f5f1;
            --dark: #191919;
            --text: #333;
            --white: #ffffff;
            --gray: #f8f9fa;
            --success: #4CAF50;
            --gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --transition: all 0.3s ease;
            --shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
            --radius: 12px;
            --glass: rgba(255, 255, 255, 0.15);
            --glass-dark: rgba(26, 26, 46, 0.8);
            --blur: blur(10px);
            --safe-area-inset-top: env(safe-area-inset-top);
            --safe-area-inset-right: env(safe-area-inset-right);
            --safe-area-inset-bottom: env(safe-area-inset-bottom);
            --safe-area-inset-left: env(safe-area-inset-left);
        }
        
        /* Reset و استایل پایه */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            background-color: var(--white);
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
            font-weight: 300;
            font-size: 14px;
        }

        body.modal-open {
            overflow: hidden;
        }
        
        /* Header Styles - موبایل فرست */
        .header {
            background: var(--white);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            padding-top: calc(12px + var(--safe-area-inset-top));
        }
        
        .header-container {
            max-width: 100%;
            margin: 0 auto;
            padding: 0 15px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 15px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            color: var(--primary);
            text-decoration: none;
            font-size: 18px;
            font-weight: 700;
            gap: 8px;
            justify-self: center;
        }
        
        .logo-text {
            font-weight: 800;
            color: var(--primary);
            letter-spacing: -0.5px;
            display: none;
        }
        
        .logo-image {
            width: 60px;
            height: 30px;
            border-radius: 10%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        /* منوی دسکتاپ - در موبایل مخفی می‌شود */
        .nav-desktop {
            display: none;
        }
        
        /* هامبورگر منو برای موبایل */
        .hamburger {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 28px;
            height: 20px;
            cursor: pointer;
            z-index: 1001;
            justify-self: start;
        }
        
        .hamburger span {
            height: 2px;
            width: 100%;
            background: var(--primary);
            border-radius: 3px;
            transition: var(--transition);
        }
        
        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        
        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }
        
        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }
        
        /* منوی موبایل */
        .mobile-menu {
            position: fixed;
            top: 0;
            right: -100%;
            width: 85%;
            max-width: 320px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: var(--blur);
            z-index: 1000;
            transition: var(--transition);
            padding: 70px 20px 20px;
            overflow-y: auto;
            box-shadow: -2px 0 10px rgba(0,0,0,0.05);
            border-left: 1px solid rgba(0, 0, 0, 0.05);
            padding-bottom: var(--safe-area-inset-bottom);
        }
        
        .mobile-menu.active {
            right: 0;
        }
        
        .mobile-nav {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .mobile-nav-link {
            color: var(--primary);
            text-decoration: none;
            font-size: 16px;
            padding: 12px 15px;
            border-radius: 8px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(248, 249, 250, 0.5);
        }
        
        .mobile-nav-link:hover {
            background: rgba(200, 75, 49, 0.1);
            padding-right: 20px;
        }
        
        .mobile-nav-link i {
            font-size: 18px;
            min-width: 22px;
            color: var(--accent);
        }
        
        /* آیکون‌های هدر */
        .header-icons {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-self: end;
        }
        
        .icon-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 18px;
            cursor: pointer;
            position: relative;
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .icon-btn:hover {
            color: var(--accent);
            background-color: rgba(200, 75, 49, 0.1);
        }
        
        .user-avatar {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            object-fit: cover;
            cursor: pointer;
            border: 1px solid var(--accent-light);
            transition: var(--transition);
        }
        
        .user-avatar:hover {
            transform: scale(1.1);
        }
        
        .badge {
            position: absolute;
            top: -5px;
            left: -5px;
            background: var(--accent);
            color: var(--white);
            font-size: 10px;
            font-weight: bold;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* بخش هیرو */
        .hero {
            height: 300px;
            background: url(http://hamsar.wuaze.com/wp-content/uploads/2024/03/bg-10.jpg) no-repeat center center;
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 15px;
            position: relative;
            overflow: hidden;
            margin: 20px 15px;
            width: auto;
            border-radius: 12px;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 0;
            border-radius: 12px;
        }

        .hero-content {
            max-width: 100%;
            position: relative;
            z-index: 1;
            padding: 0 10px;
        }

        .hero-title {
            font-size: 1.8rem;
            color: var(--white);
            margin-bottom: 15px;
            font-weight: 700;
            line-height: 1.3;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .hero-subtitle {
            font-size: 1rem;
            color: var(--white);
            margin-bottom: 30px;
            font-weight: 300;
            text-shadow: 0 1px 5px rgba(0,0,0,0.3);
        }
        
        /* بخش محصولات */
        .section {
            padding: 40px 15px;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .section-title h2 {
            font-size: 1.6rem;
            color: var(--dark);
            font-weight: 400;
            display: inline-block;
            padding-bottom: 12px;
            position: relative;
        }
        
        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background: var(--accent);
        }
        
        .products-container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        .product-card {
            background: var(--white);
            border-radius: var(--radius);
            overflow: hidden;
            transition: var(--transition);
            position: relative;
            transform: translateY(0);
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(240, 240, 240, 0.8);
            box-shadow: var(--shadow);
        }
        
        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        
        .product-image {
            height: 160px;
            background-color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
            overflow: hidden;
            aspect-ratio: 1/1;
        }
        
        .product-image img {
            width: 75%;
            height: 75%;
            object-fit: contain;
            transition: var(--transition);
            position: relative;
            z-index: 2;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: var(--accent);
            color: var(--white);
            padding: 4px 10px;
            border-radius: 30px;
            font-size: 10px;
            font-weight: 500;
            z-index: 3;
        }
        
        .product-info {
            padding: 15px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-size: 14px;
            font-weight: 400;
            margin-bottom: 10px;
            color: var(--dark);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
        }
        
        .product-title:hover {
            color: var(--accent);
        }
        
        .product-bottom {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .product-price {
            font-size: 14px;
            font-weight: 500;
            color: var(--accent);
        }
        
        .product-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gray);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 14px;
        }
        
        .action-btn:hover {
            background: var(--accent);
            color: white;
            transform: scale(1.1);
        }
        
        /* مودال‌ها - بهینه‌شده برای موبایل */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 15px;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: var(--blur);
            width: 100%;
            max-width: 500px;
            border-radius: 12px;
            padding: 20px;
            position: relative;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close-modal-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            font-size: 14px;
            cursor: pointer;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* سایدبار مودال‌ها (سبد خرید، علاقه‌مندی‌ها) */
        .side-modal {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 100%;
            height: 100vh;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: var(--blur);
            z-index: 1500;
            transition: right 0.4s ease;
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 15px rgba(0,0,0,0.08);
        }

        .side-modal.open {
            right: 0;
        }

        .side-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid #eee;
            flex-shrink: 0;
            padding-top: calc(15px + var(--safe-area-inset-top));
        }

        .side-modal-title {
            font-size: 20px;
            font-weight: 400;
            color: var(--dark);
        }

        .close-side-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #777;
            transition: var(--transition);
        }

        .close-side-modal:hover {
            transform: rotate(90deg);
        }

        .side-modal-body {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
        }

        .side-modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: var(--blur);
            padding-bottom: calc(20px + var(--safe-area-inset-bottom));
        }
        
        /* آیتم‌های سبد خرید */
        .cart-item {
            display: flex;
            gap: 12px;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-image {
            width: 70px;
            height: 70px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .cart-item-image img {
            max-width: 70%;
            max-height: 70%;
        }
        
        .cart-item-details {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 500;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .cart-item-size {
            font-size: 12px;
            color: #777;
            margin-bottom: 8px;
        }
        
        .cart-item-price {
            font-weight: 500;
            color: var(--accent);
            font-size: 14px;
        }
        
        .cart-item-remove {
            color: #ff6b6b;
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            align-self: flex-start;
            transition: var(--transition);
            padding: 5px;
        }
        
        .cart-item-remove:hover {
            transform: scale(1.1);
        }
        
        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 15px;
        }

        .final-total {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        .checkout-button {
            width: 100%;
            padding: 14px;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .checkout-button:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        .checkout-button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        /* صفحه تسویه حساب */
        .checkout-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            position: relative;
            padding: 0 5px;
        }

        .checkout-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
            text-align: center;
        }

        .step-indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            margin-bottom: 6px;
            transition: all 0.4s ease;
            border: 2px solid #e0e0e0;
            font-size: 12px;
        }
        
        .step-indicator .fa-check {
            display: none;
            font-size: 12px;
        }
        
        .step-title {
            font-size: 11px;
            color: #777;
            text-align: center;
            font-weight: 400;
            transition: all 0.4s ease;
        }
        
        /* وضعیت فعال */
        .checkout-step.active .step-indicator {
            background: var(--white);
            color: var(--accent);
            border-color: var(--accent);
        }
        .checkout-step.active .step-title {
            color: var(--accent);
            font-weight: 500;
        }
        
        /* وضعیت تکمیل شده */
        .checkout-step.completed .step-indicator {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        .checkout-step.completed .step-indicator .step-number {
            display: none;
        }
        .checkout-step.completed .step-indicator .fa-check {
            display: block;
        }
        .checkout-step.completed .step-title {
            color: var(--dark);
        }

        .checkout-progress-bar {
            position: absolute;
            top: 14px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .checkout-progress {
            height: 100%;
            background: var(--success);
            width: 0;
            transition: width 0.5s ease;
            border-radius: 2px;
        }

        /* فرم‌های تسویه حساب */
        .checkout-form-container {
            display: none;
        }

        .checkout-form-container.active {
            display: block;
        }

        .checkout-form {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 400;
            color: var(--dark);
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #eee;
            border-radius: var(--radius);
            font-size: 14px;
            transition: var(--transition);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            background: #f9f9f9;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(200, 75, 49, 0.2);
        }
        
        .form-hint {
            font-size: 11px;
            color: #777;
            margin-top: 4px;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
        }

        .form-col {
            flex: 1;
            min-width: 120px;
        }

        .checkout-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            flex-grow: 1;
            min-width: 120px;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: #555;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }
        
        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* روش‌های ارسال */
        .shipping-methods {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin: 15px 0;
        }

        .shipping-method {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .shipping-method:hover {
            border-color: var(--accent-light);
        }

        .shipping-method.selected {
            border-color: var(--accent);
            background: rgba(200, 75, 49, 0.05);
        }

        .shipping-method input {
            margin-left: 8px;
        }

        .shipping-method-content {
            flex: 1;
            margin-right: 8px;
        }

        .shipping-method-title {
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .shipping-method-desc {
            font-size: 12px;
            color: #777;
        }

        .shipping-method-price {
            font-weight: 500;
            color: var(--accent);
            font-size: 14px;
        }

        /* اطلاعات پرداخت */
        .payment-info {
            background: #f9f9f9;
            border-radius: var(--radius);
            padding: 15px;
            margin: 15px 0;
            border-left: 3px solid var(--accent);
        }

        .payment-info-title {
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--dark);
            font-size: 15px;
        }

        .payment-info-details {
            line-height: 1.6;
            font-size: 13px;
        }

        /* آپلود فایل */
        .file-upload {
            margin: 15px 0;
        }

        .file-upload-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 400;
            color: var(--dark);
            font-size: 14px;
        }

        .file-upload-input {
            display: none;
        }

        .file-upload-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 15px;
            background: #f0f0f0;
            border: 1px dashed #ccc;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            font-size: 13px;
            width: 100%;
            justify-content: center;
        }

        .file-upload-button:hover {
            background: #e0e0e0;
            border-color: var(--accent);
        }
        
        .file-upload-button .fa-check-circle {
            color: var(--success);
            display: none;
        }
        
        .file-upload-button.uploaded .fa-check-circle {
            display: inline-block;
        }

        .file-name {
            font-size: 13px;
            color: #777;
        }

        /* خلاصه سفارش */
        .order-summary, .order-review {
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
        }

        .order-summary-title, .order-review-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--dark);
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
        }

        .order-summary-item, .order-review-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .order-review-item {
            flex-direction: column;
            align-items: flex-start;
            padding-bottom: 8px;
            border-bottom: 1px solid #f5f5f5;
        }
        
        .order-review-item:last-child {
            border-bottom: none;
        }
        
        .order-review-label {
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 13px;
        }

        .order-review-value {
            color: #555;
            text-align: right;
            width: 100%;
            font-size: 13px;
        }

        .order-summary-total {
            font-weight: 500;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--dark);
        }

        /* تأییدیه سفارش */
        .order-confirmation {
            text-align: center;
            padding: 30px 15px;
        }

        .order-confirmation-icon {
            font-size: 50px;
            color: var(--success);
            margin-bottom: 15px;
        }

        .order-confirmation-title {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--dark);
        }

        .order-confirmation-message {
            font-size: 14px;
            color: #555;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        /* Dropdown سفارشی برای استان/شهر */
        .custom-dropdown {
            position: relative;
        }
        .dropdown-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #eee;
            border-radius: var(--radius);
            max-height: 200px;
            overflow-y: auto;
            z-index: 10;
            display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }
        .dropdown-item {
            padding: 10px 12px;
            cursor: pointer;
            font-size: 13px;
            transition: var(--transition);
        }
        .dropdown-item:hover {
            background-color: #f0f0f0;
        }

        /* مودال احراز هویت */
        #authModal .modal-content {
            max-width: 400px;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .auth-tab {
            padding: 10px 20px;
            cursor: pointer;
            font-weight: 600;
            color: #777;
            transition: var(--transition);
            position: relative;
            font-size: 14px;
        }
        
        .auth-tab.active {
            color: var(--accent);
        }
        
        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: 0;
            width: 100%;
            height: 2px;
            background: var(--accent);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .auth-form-group {
            margin-bottom: 15px;
        }
        
        .auth-form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 400;
            color: var(--dark);
            font-size: 14px;
        }
        
        .auth-form-input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            font-size: 14px;
            transition: var(--transition);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
            background: #f9f9f9;
        }
        
        .auth-form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(200, 75, 49, 0.2);
        }
        
        .auth-form-button {
            width: 100%;
            padding: 12px;
            background: var(--accent);
            color: var(--white);
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 10px;
        }
        
        .auth-form-button:hover {
            background: var(--accent-light);
            transform: translateY(-2px);
        }
        
        .auth-form-footer {
            text-align: center;
            margin-top: 15px;
            color: #777;
            font-size: 13px;
        }
        
        .auth-form-footer a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
        }
        
        .auth-divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: #777;
            font-size: 13px;
        }
        
        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #eee;
        }
        
        .auth-divider::before {
            margin-left: 12px;
        }
        
        .auth-divider::after {
            margin-right: 12px;
        }
        
        .auth-social-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .auth-social-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid #eee;
            background: white;
            color: #333;
            font-size: 13px;
        }
        
        .auth-social-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .auth-social-button i {
            margin-left: 8px;
            font-size: 16px;
        }
        
        .auth-social-button.google {
            color: #DB4437;
            border-color: #DB4437;
        }
        
        /* جستجو */
        .search-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.98);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            transform: translateY(-100%);
            transition: transform 0.4s ease;
            padding: 20px;
        }
        
        .search-container.active {
            transform: translateY(0);
        }
        
        .search-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-top: var(--safe-area-inset-top);
        }
        
        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
            font-family: 'Vazirmatn', Tahoma, sans-serif;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(200, 75, 49, 0.2);
        }
        
        .close-search {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #777;
            margin-right: 10px;
            transition: var(--transition);
        }
        
        .search-results {
            flex: 1;
            overflow-y: auto;
            padding-bottom: var(--safe-area-inset-bottom);
        }
        
        .search-result-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .search-result-item:hover {
            background-color: #f9f9f9;
            padding-right: 10px;
        }
        
        .search-result-image {
            width: 50px;
            height: 50px;
            background: #f5f5f5;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 12px;
            flex-shrink: 0;
        }
        
        .search-result-image img {
            max-width: 70%;
            max-height: 70%;
        }
        
        .search-result-info {
            flex: 1;
        }
        
        .search-result-name {
            font-weight: 500;
            margin-bottom: 4px;
            font-size: 14px;
        }
        
        .search-result-price {
            font-weight: 500;
            color: var(--accent);
            font-size: 13px;
        }
        
        /* فوتر */
        .footer {
            background: var(--primary);
            color: white;
            padding: 40px 15px 20px;
            margin-top: 40px;
        }
        
        .footer-container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            color: white;
            text-decoration: none;
            font-size: 20px;
            font-weight: 700;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .footer-about {
            font-size: 14px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }
        
        .footer-social {
            display: flex;
            gap: 12px;
        }
        
        .footer-social-link {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-social-link:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }
        
        .footer-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 15px;
            position: relative;
            padding-bottom: 8px;
        }
        
        .footer-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 30px;
            height: 2px;
            background: var(--accent);
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-link {
            margin-bottom: 10px;
        }
        
        .footer-link a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .footer-link a:hover {
            color: white;
            padding-right: 5px;
        }
        
        .footer-link i {
            font-size: 12px;
        }
        
        .footer-contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .footer-contact-item i {
            color: var(--accent);
            font-size: 16px;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        /* اسنک‌بارها و اعلان‌ها */
        .snackbar {
            position: fixed;
            bottom: 20px;
            right: 50%;
            transform: translateX(50%);
            background: #333;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            max-width: 90%;
        }
        
        .snackbar.show {
            opacity: 1;
            visibility: visible;
        }
        
        .snackbar.success {
            background: var(--success);
        }
        
        .snackbar.error {
            background: #f44336;
        }
        
        .snackbar.warning {
            background: #ff9800;
        }
        
        /* لودر و انیمیشن‌ها */
        .loader {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .slide-up {
            animation: slideUp 0.5s ease forwards;
        }
        
        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* استایل‌های خاص برای دستگاه‌های موبایل */
        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .hero-title {
                font-size: 1.5rem;
            }
            
            .hero-subtitle {
                font-size: 0.9rem;
            }
            
            .section-title h2 {
                font-size: 1.4rem;
            }
            
            .checkout-step {
                flex: 1;
            }
            
            .step-title {
                font-size: 10px;
            }
            
            .btn {
                min-width: 100%;
            }
            
            .checkout-actions {
                flex-direction: column;
            }
        }
        
        /* استایل‌های خاص برای تبلت و دستگاه‌های بزرگتر */
        @media (min-width: 768px) {
            .header-container {
                padding: 0 30px;
            }
            
            .logo-text {
                display: block;
            }
            
            .nav-desktop {
                display: flex;
                gap: 20px;
                justify-self: center;
            }
            
            .nav-link {
                color: var(--primary);
                text-decoration: none;
                font-size: 15px;
                font-weight: 400;
                transition: var(--transition);
                padding: 8px 0;
                position: relative;
            }
            
            .nav-link::after {
                content: '';
                position: absolute;
                bottom: 0;
                right: 0;
                width: 0;
                height: 2px;
                background: var(--accent);
                transition: var(--transition);
            }
            
            .nav-link:hover::after {
                width: 100%;
            }
            
            .hamburger {
                display: none;
            }
            
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
            
            .hero {
                height: 400px;
                margin: 30px;
            }
            
            .hero-title {
                font-size: 2.2rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .section {
                padding: 60px 30px;
            }
            
            .footer-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .footer-about {
                padding-right: 20px;
            }
        }
        
        @media (min-width: 1024px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .header-container {
                max-width: 1200px;
            }
            
            .products-container {
                max-width: 1200px;
            }
            
            .footer-container {
                max-width: 1200px;
            }
        }
        
        /* پشتیبانی از حالت landscape در موبایل */
        @media (max-height: 500px) and (orientation: landscape) {
            .hero {
                height: 200px;
            }
            
            .mobile-menu {
                padding-top: 50px;
            }
        }
        
        /* پشتیبانی از حالت تیره */
        @media (prefers-color-scheme: dark) {
            :root {
                --light: #1a1a1a;
                --white: #2d2d2d;
                --text: #e0e0e0;
                --dark: #f5f5f5;
                --gray: #333;
            }
            
            body {
                background-color: #121212;
                color: #e0e0e0;
            }
            
            .header {
                background: #1e1e1e;
                border-bottom-color: rgba(255, 255, 255, 0.1);
            }
            
            .product-card {
                background: #2d2d2d;
                border-color: rgba(255, 255, 255, 0.1);
            }
            
            .form-control {
                background: #333;
                border-color: #444;
                color: #e0e0e0;
            }
            
            .dropdown-list {
                background: #333;
                border-color: #444;
            }
            
            .dropdown-item {
                color: #e0e0e0;
            }
            
            .dropdown-item:hover {
                background-color: #444;
            }
        }
    </style>
</head>
<body>
    <!-- هدر -->
    <header class="header">
        <div class="header-container">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            
            <a href="#" class="logo">
                <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/logo.png" alt="همسر پرفیوم" class="logo-image">
                <span class="logo-text">همسر پرفیوم</span>
            </a>
            
            <nav class="nav-desktop">
                <a href="#" class="nav-link">خانه</a>
                <a href="#" class="nav-link">محصولات</a>
                <a href="#" class="nav-link">درباره ما</a>
                <a href="#" class="nav-link">تماس با ما</a>
            </nav>
            
            <div class="header-icons">
                <button class="icon-btn" id="searchBtn">
                    <i class="fas fa-search"></i>
                </button>
                <button class="icon-btn" id="wishlistBtn">
                    <i class="fas fa-heart"></i>
                    <span class="badge">3</span>
                </button>
                <button class="icon-btn" id="cartBtn">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="badge">2</span>
                </button>
                <img src="https://ui-avatars.com/api/?name=کاربر&background=c84b31&color=fff" alt="پروفایل کاربر" class="user-avatar" id="userBtn">
            </div>
        </div>
    </header>
    
    <!-- منوی موبایل -->
    <div class="mobile-menu">
        <nav class="mobile-nav">
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-home"></i>
                خانه
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-store"></i>
                محصولات
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-info-circle"></i>
                درباره ما
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-phone"></i>
                تماس با ما
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-user"></i>
                حساب کاربری
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-heart"></i>
                علاقه‌مندی‌ها
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-shopping-cart"></i>
                سبد خرید
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-question-circle"></i>
                راهنمای خرید
            </a>
            <a href="#" class="mobile-nav-link">
                <i class="fas fa-truck"></i>
                شرایط ارسال
            </a>
        </nav>
    </div>
    
    <!-- بخش هیرو -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">عطرهای لاکچری با بهترین قیمت</h1>
            <p class="hero-subtitle">با همسر پرفیوم، خاص و متمایز بمانید</p>
            <button class="btn btn-primary">مشاهده محصولات</button>
        </div>
    </section>
    
    <!-- بخش محصولات پرفروش -->
    <section class="section">
        <div class="section-title">
            <h2>پرفروش‌ترین محصولات</h2>
        </div>
        
        <div class="products-container">
            <div class="products-grid">
                <!-- محصول 1 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/1-1.jpg" alt="عطر مردانه Paco Rabanne 1 Million">
                        <div class="product-badge">پرفروش</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">عطر مردانه Paco Rabanne 1 Million</h3>
                        <div class="product-bottom">
                            <div class="product-price">۴۹۹,۰۰۰ تومان</div>
                            <div class="product-actions">
                                <button class="action-btn"><i class="fas fa-heart"></i></button>
                                <button class="action-btn"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- محصول 2 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/2-1.jpg" alt="عطر زنانه Carolina Herrera Good Girl">
                        <div class="product-badge">جدید</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">عطر زنانه Carolina Herrera Good Girl</h3>
                        <div class="product-bottom">
                            <div class="product-price">۵۵۰,۰۰۰ تومان</div>
                            <div class="product-actions">
                                <button class="action-btn"><i class="fas fa-heart"></i></button>
                                <button class="action-btn"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- محصول 3 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/3-1.jpg" alt="عطر مردانه Dior Sauvage">
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">عطر مردانه Dior Sauvage</h3>
                        <div class="product-bottom">
                            <div class="product-price">۶۲۰,۰۰۰ تومان</div>
                            <div class="product-actions">
                                <button class="action-btn"><i class="fas fa-heart"></i></button>
                                <button class="action-btn"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- محصول 4 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/4-1.jpg" alt="عطر زنانه Lancôme La Vie Est Belle">
                        <div class="product-badge">تخفیف</div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">عطر زنانه Lancôme La Vie Est Belle</h3>
                        <div class="product-bottom">
                            <div class="product-price">۵۸۰,۰۰۰ تومان</div>
                            <div class="product-actions">
                                <button class="action-btn"><i class="fas fa-heart"></i></button>
                                <button class="action-btn"><i class="fas fa-shopping-cart"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- مودال احراز هویت -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <button class="close-modal-btn">&times;</button>
            
            <div class="auth-tabs">
                <div class="auth-tab active" data-tab="login">ورود</div>
                <div class="auth-tab" data-tab="register">ثبت‌نام</div>
            </div>
            
            <div class="auth-form active" id="loginForm">
                <div class="auth-form-group">
                    <label class="auth-form-label">ایمیل یا شماره موبایل</label>
                    <input type="text" class="auth-form-input" placeholder="ایمیل یا شماره موبایل خود را وارد کنید">
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label">رمز عبور</label>
                    <input type="password" class="auth-form-input" placeholder="رمز عبور خود را وارد کنید">
                </div>
                
                <button class="auth-form-button">ورود به حساب</button>
                
                <div class="auth-form-footer">
                    رمز عبور خود را فراموش کرده‌اید؟ <a href="#">بازیابی رمز عبور</a>
                </div>
                
                <div class="auth-divider">یا</div>
                
                <div class="auth-social-buttons">
                    <button class="auth-social-button google">
                        <i class="fab fa-google"></i>
                        ورود با گوگل
                    </button>
                </div>
            </div>
            
            <div class="auth-form" id="registerForm">
                <div class="auth-form-group">
                    <label class="auth-form-label">نام کامل</label>
                    <input type="text" class="auth-form-input" placeholder="نام و نام خانوادگی خود را وارد کنید">
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label">ایمیل</label>
                    <input type="email" class="auth-form-input" placeholder="ایمیل خود را وارد کنید">
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label">شماره موبایل</label>
                    <input type="tel" class="auth-form-input" placeholder="شماره موبایل خود را وارد کنید">
                </div>
                
                <div class="auth-form-group">
                    <label class="auth-form-label">رمز عبور</label>
                    <input type="password" class="auth-form-input" placeholder="رمز عبور خود را وارد کنید">
                </div>
                
                <button class="auth-form-button">ثبت‌نام در سایت</button>
                
                <div class="auth-form-footer">
                    با ثبت‌نام در سایت <a href="#">قوانین و مقررات</a> را می‌پذیرید
                </div>
            </div>
        </div>
    </div>
    
    <!-- مودال سبد خرید -->
    <div class="side-modal" id="cartModal">
        <div class="side-modal-header">
            <h3 class="side-modal-title">سبد خرید شما</h3>
            <button class="close-side-modal">&times;</button>
        </div>
        
        <div class="side-modal-body">
            <div class="cart-item">
                <div class="cart-item-image">
                    <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/1-1.jpg" alt="عطر مردانه Paco Rabanne 1 Million">
                </div>
                <div class="cart-item-details">
                    <div class="cart-item-name">عطر مردانه Paco Rabanne 1 Million</div>
                    <div class="cart-item-size">سایز: 100ml</div>
                    <div class="cart-item-price">۴۹۹,۰۰۰ تومان</div>
                </div>
                <button class="cart-item-remove">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
            
            <div class="cart-item">
                <div class="cart-item-image">
                    <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/2-1.jpg" alt="عطر زنانه Carolina Herrera Good Girl">
                </div>
                <div class="cart-item-details">
                    <div class="cart-item-name">عطر زنانه Carolina Herrera Good Girl</div>
                    <div class="cart-item-size">سایز: 80ml</div>
                    <div class="cart-item-price">۵۵۰,۰۰۰ تومان</div>
                </div>
                <button class="cart-item-remove">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>
        
        <div class="side-modal-footer">
            <div class="cart-summary-row">
                <span>جمع سبد خرید:</span>
                <span>۱,۰۴۹,۰۰۰ تومان</span>
            </div>
            <div class="cart-summary-row">
                <span>هزینه ارسال:</span>
                <span>۴۰,۰۰۰ تومان</span>
            </div>
            <div class="final-total">
                <span>مبلغ قابل پرداخت:</span>
                <span>۱,۰۸۹,۰۰۰ تومان</span>
            </div>
            
            <button class="checkout-button" id="checkoutBtn">
                <i class="fas fa-credit-card"></i>
                ادامه تسویه حساب
            </button>
        </div>
    </div>
    
    <!-- مودال تسویه حساب -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <button class="close-modal-btn">&times;</button>
            
            <h2 style="text-align: center; margin-bottom: 20px;">تسویه حساب</h2>
            
            <div class="checkout-steps">
                <div class="checkout-step active" data-step="1">
                    <div class="step-indicator"><span class="step-number">1</span><i class="fas fa-check"></i></div>
                    <div class="step-title">اطلاعات شخصی</div>
                </div>
                <div class="checkout-step" data-step="2">
                    <div class="step-indicator"><span class="step-number">2</span><i class="fas fa-check"></i></div>
                    <div class="step-title">روش ارسال</div>
                </div>
                <div class="checkout-step" data-step="3">
                    <div class="step-indicator"><span class="step-number">3</span><i class="fas fa-check"></i></div>
                    <div class="step-title">پرداخت</div>
                </div>
                <div class="checkout-step" data-step="4">
                    <div class="step-indicator"><span class="step-number">4</span><i class="fas fa-check"></i></div>
                    <div class="step-title">تأیید نهایی</div>
                </div>
                <div class="checkout-progress-bar">
                    <div class="checkout-progress" style="width: 25%;"></div>
                </div>
            </div>
            
            <!-- مرحله 1: اطلاعات شخصی -->
            <div class="checkout-form-container active" data-step="1">
                <div class="checkout-form">
                    <div class="form-group">
                        <label class="form-label">نام و نام خانوادگی *</label>
                        <input type="text" class="form-control" placeholder="نام و نام خانوادگی خود را وارد کنید">
                    </div>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">شماره موبایل *</label>
                                <input type="tel" class="form-control" placeholder="09xxxxxxxxx">
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">آدرس ایمیل</label>
                                <input type="email" class="form-control" placeholder="email@example.com">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="checkout-form">
                    <h3 style="margin-bottom: 15px;">آدرس تحویل سفارش</h3>
                    
                    <div class="form-row">
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">استان *</label>
                                <select class="form-control" id="provinceSelect">
                                    <option value="">انتخاب استان</option>
                                    <!-- استان‌ها با JavaScript پر می‌شوند -->
                                </select>
                            </div>
                        </div>
                        <div class="form-col">
                            <div class="form-group">
                                <label class="form-label">شهر *</label>
                                <select class="form-control" id="citySelect" disabled>
                                    <option value="">ابتدا استان را انتخاب کنید</option>
                                    <!-- شهرها با JavaScript پر می‌شوند -->
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">آدرس کامل *</label>
                        <textarea class="form-control" rows="3" placeholder="آدرس کامل پستی را وارد کنید"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">کد پستی</label>
                        <input type="text" class="form-control" placeholder="۱۰ رقمی">
                    </div>
                </div>
                
                <div class="checkout-actions">
                    <button class="btn btn-secondary" id="closeCheckoutBtn">انصراف</button>
                    <button class="btn btn-primary" data-next-step="2">مرحله بعد</button>
                </div>
            </div>
            
            <!-- مرحله 2: روش ارسال -->
            <div class="checkout-form-container" data-step="2">
                <div class="checkout-form">
                    <h3 style="margin-bottom: 15px;">انتخاب روش ارسال</h3>
                    
                    <div class="shipping-methods">
                        <label class="shipping-method selected">
                            <input type="radio" name="shippingMethod" checked>
                            <div class="shipping-method-content">
                                <div class="shipping-method-title">پست پیشتاز</div>
                                <div class="shipping-method-desc">تحویل بین ۳ تا ۵ روز کاری</div>
                            </div>
                            <div class="shipping-method-price">۴۰,۰۰۰ تومان</div>
                        </label>
                        
                        <label class="shipping-method">
                            <input type="radio" name="shippingMethod">
                            <div class="shipping-method-content">
                                <div class="shipping-method-title">پیک موتوری</div>
                                <div class="shipping-method-desc">تحویل همان روز (فقط تهران)</div>
                            </div>
                            <div class="shipping-method-price">۶۰,۰۰۰ تومان</div>
                        </label>
                        
                        <label class="shipping-method">
                            <input type="radio" name="shippingMethod">
                            <div class="shipping-method-content">
                                <div class="shipping-method-title">تیپاکس</div>
                                <div class="shipping-method-desc">تحویل بین ۲ تا ۴ روز کاری</div>
                            </div>
                            <div class="shipping-method-price">۵۰,۰۰۰ تومان</div>
                        </label>
                    </div>
                </div>
                
                <div class="checkout-actions">
                    <button class="btn btn-secondary" data-prev-step="1">مرحله قبل</button>
                    <button class="btn btn-primary" data-next-step="3">مرحله بعد</button>
                </div>
            </div>
            
            <!-- مرحله 3: پرداخت -->
            <div class="checkout-form-container" data-step="3">
                <div class="checkout-form">
                    <h3 style="margin-bottom: 15px;">انتخاب روش پرداخت</h3>
                    
                    <div class="shipping-methods">
                        <label class="shipping-method selected">
                            <input type="radio" name="paymentMethod" checked>
                            <div class="shipping-method-content">
                                <div class="shipping-method-title">درگاه پرداخت آنلاین</div>
                                <div class="shipping-method-desc">پرداخت امن با کارت‌های عضو شتاب</div>
                            </div>
                            <i class="fas fa-credit-card" style="color: var(--accent); font-size: 20px;"></i>
                        </label>
                        
                        <label class="shipping-method">
                            <input type="radio" name="paymentMethod">
                            <div class="shipping-method-content">
                                <div class="shipping-method-title">پرداخت در محل</div>
                                <div class="shipping-method-desc">پرداخت هنگام تحویل کالا</div>
                            </div>
                            <i class="fas fa-money-bill-wave" style="color: var(--accent); font-size: 20px;"></i>
                        </label>
                    </div>
                </div>
                
                <div class="payment-info">
                    <div class="payment-info-title">مبلغ قابل پرداخت:</div>
                    <div class="payment-info-details">
                        <div>جمع سبد خرید: ۱,۰۴۹,۰۰۰ تومان</div>
                        <div>هزینه ارسال: ۴۰,۰۰۰ تومان</div>
                        <div style="font-weight: 500; margin-top: 8px;">مجموع: ۱,۰۸۹,۰۰۰ تومان</div>
                    </div>
                </div>
                
                <div class="checkout-actions">
                    <button class="btn btn-secondary" data-prev-step="2">مرحله قبل</button>
                    <button class="btn btn-primary" data-next-step="4">پرداخت</button>
                </div>
            </div>
            
            <!-- مرحله 4: تأیید نهایی -->
            <div class="checkout-form-container" data-step="4">
                <div class="order-confirmation">
                    <div class="order-confirmation-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="order-confirmation-title">سفارش شما با موفقیت ثبت شد!</h3>
                    <p class="order-confirmation-message">
                        کد پیگیری سفارش: <strong>HS123456</strong><br>
                        جزئیات سفارش به ایمیل شما ارسال خواهد شد.<br>
                        با تشکر از خرید شما.
                    </p>
                    <button class="btn btn-primary" id="finishCheckoutBtn">بستن</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- مودال جستجو -->
    <div class="search-container" id="searchContainer">
        <div class="search-header">
            <button class="close-search">&times;</button>
            <input type="text" class="search-input" placeholder="جستجوی محصولات...">
        </div>
        
        <div class="search-results">
            <!-- نتایج جستجو با JavaScript پر می‌شوند -->
        </div>
    </div>
    
    <!-- فوتر -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div>
                    <a href="#" class="footer-logo">
                        <img src="http://hamsar.wuaze.com/wp-content/uploads/2024/03/logo.png" alt="همسر پرفیوم" class="logo-image">
                        همسر پرفیوم
                    </a>
                    <p class="footer-about">
                        فروشگاه اینترنتی همسر پرفیوم با ارائه بهترین عطرهای اورجینال و لاکچری از برندهای معتبر جهانی، تجربه‌ای متفاوت از خرید آنلاین عطر را برای شما فراهم می‌کند.
                    </p>
                    <div class="footer-social">
                        <a href="#" class="footer-social-link"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="footer-social-link"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="footer-social-link"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" class="footer-social-link"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                
                <div>
                    <h3 class="footer-title">دسترسی سریع</h3>
                    <ul class="footer-links">
                        <li class="footer-link"><a href="#"><i class="fas fa-chevron-left"></i> خانه</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-chevron-left"></i> محصولات</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-chevron-left"></i> درباره ما</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-chevron-left"></i> تماس با ما</a></li>
                        <li class="footer-link"><a href="#"><i class="fas fa-chevron-left"></i> شرایط بازگرداندن کالا</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="footer-title">اطلاعات تماس</h3>
                    <div class="footer-contact-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>تهران، خیابان ولیعصر، پلاک ۱۲۳۴</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-phone"></i>
                        <span>۰۲۱-۱۲۳۴۵۶۷۸</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>info@hamsarperfume.ir</span>
                    </div>
                    <div class="footer-contact-item">
                        <i class="fas fa-clock"></i>
                        <span>پشتیبانی ۲۴ ساعته</span>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>کلیه حقوق این وبسایت متعلق به فروشگاه اینترنتی همسر پرفیوم می‌باشد. © ۱۴۰۳</p>
            </div>
        </div>
    </footer>
    
    <!-- اسنک‌بار -->
    <div class="snackbar" id="snackbar">
        <i class="fas fa-check-circle"></i>
        <span id="snackbarMessage">عملیات با موفقیت انجام شد</span>
    </div>
    
    <script>
        // داده‌های استان‌ها و شهرهای ایران
        const iranProvinces = [
            { id: 1, name: 'آذربایجان شرقی', cities: ['تبریز', 'مراغه', 'مرند', 'میانه', 'اهر', 'بناب', 'اسکو', 'آذرشهر', 'سراب', 'هشترود', 'بستان‌آباد', 'شبستر', 'هریس', 'جلفا', 'ملکان', 'ورزقان', 'عجب‌شیر', 'کلیبر', 'چاراویماق', 'خداآفرین'] },
            { id: 2, name: 'آذربایجان غربی', cities: ['ارومیه', 'خوی', 'مهاباد', 'میاندوآب', 'سلماس', 'نقده', 'پیرانشهر', 'ماکو', 'شاهین‌دژ', 'بوکان', 'سردشت', 'اشنویه', 'تکاب', 'چالدران', 'پلدشت', 'شوط', 'چایپاره', 'زرینه'] },
            { id: 3, name: 'اردبیل', cities: ['اردبیل', 'پارس‌آباد', 'خلخال', 'مشگین‌شهر', 'گرمی', 'نمین', 'نیر', 'بیله‌سوار', 'جعفرآباد', 'اصلاندوز', 'کوثر', 'گیوی', 'انگوت'] },
            { id: 4, name: 'اصفهان', cities: ['اصفهان', 'کاشان', 'خمینی‌شهر', 'نجف‌آباد', 'شهرضا', 'گلپایگان', 'مبارکه', 'نایین', 'سمیرم', 'فلاورجان', 'اردستان', 'زرین‌شهر', 'شاهین‌شهر', 'دهاقان', 'خوانسار', 'برخوار', 'چادگان', 'تیران', 'آران و بیدگل', 'خور و بیابانک', 'باغبهادران', 'ورزنه', 'نطنز', 'علویجه', 'حبیب‌آباد'] },
            { id: 5, name: 'البرز', cities: ['کرج', 'هشتگرد', 'نظرآباد', 'طالقان', 'اشتهارد', 'فردیس', 'ماهدشت', 'مشکین‌دشت', 'کوهسار', 'گلسار', 'محمدشهر', 'تنکمان', 'ساوجبلاغ', 'چهارباغ', 'اشتهارد', 'آسارا'] },
            { id: 6, name: 'ایلام', cities: ['ایلام', 'دهلران', 'ایوان', 'مهران', 'آبدانان', 'دره‌شهر', 'چرداول', 'بدره', 'سرابله', 'موسیان', 'لهر'] },
            { id: 7, name: 'بوشهر', cities: ['بوشهر', 'برازجان', 'خارک', 'خورموج', 'جم', 'کنگان', 'گناوه', 'عسلویه', 'دیر', 'دیلم', 'سیراف', 'اهرم', 'نخل تقی', 'بندر ریگ', 'بندر دیر', 'بندر کنگان', 'بندر گناوه'] },
            { id: 8, name: 'تهران', cities: ['تهران', 'اسلام‌شهر', 'ری', 'ورامین', 'شهریار', 'پاکدشت', 'قدس', 'ملارد', 'قرچک', 'دماوند', 'فیروزکوه', 'شمال', 'رباط‌کریم', 'پردیس', 'بهارستان', 'پیشوا', 'کهریزک', 'بومهن', 'لواسان', 'شهریار', 'نسیم‌شهر', 'چهاردانگه'] },
            { id: 9, name: 'چهارمحال و بختیاری', cities: ['شهرکرد', 'بروجن', 'فارسان', 'اردل', 'لردگان', 'سامان', 'بن', 'نافچ', 'جونقان', 'دستنا', 'گندمان', 'سرخون', 'صمصامی'] },
            { id: 10, name: 'خراسان جنوبی', cities: ['بیرجند', 'قائن', 'فردوس', 'نهبندان', 'سربیشه', 'درمیان', 'طبس', 'خوسف', 'زیرکوه', 'سرایان', 'اسدیه', 'آیسک', 'نیمبلوک'] },
            { id: 11, name: 'خراسان رضوی', cities: ['مشهد', 'نیشابور', 'سبزوار', 'تربت حیدریه', 'قوچان', 'کاشمر', 'سرخس', 'فریمان', 'تایباد', 'خواف', 'درگز', 'چناران', 'گناباد', 'بردسکن', 'طرقبه', 'شاندیز', 'فیروزه', 'باخرز', 'رشتخوار', 'جغتای', 'داورزن', 'کلات', 'بجستان', 'زبرخان', 'فیض‌آباد', 'مشهد ثامن'] },
            { id: 12, name: 'خراسان شمالی', cities: ['بجنورد', 'اسفراین', 'شیروان', 'آشخانه', 'جاجرم', 'گرمه', 'راز', 'پیش قلعه', 'سنخواست', 'فاروج', 'تیتکانلو', 'لوجلی'] },
            { id: 13, name: 'خوزستان', cities: ['اهواز', 'دزفول', 'آبادان', 'خرمشهر', 'مسجدسلیمان', 'شوش', 'شوشتر', 'اندیمشک', 'بندر ماهشهر', 'بهبهان', 'رامهرمز', 'ایذه', 'هویزه', 'باغ‌ملک', 'حمیدیه', 'کارون', 'لالی', 'گتوند', 'هندیجان', 'شادگان', 'اندیکا', 'باوی', 'قلعه تل', 'ملاثانی', 'ویس'] },
            { id: 14, name: 'زنجان', cities: ['زنجان', 'ابهر', 'خرمدره', 'قیدار', 'خدابنده', 'ماهنشان', 'طارم', 'سلطانیه', 'آب بر', 'زرین‌رود', 'سجاس', 'صائین قلعه', 'حلب', 'زنجانرود'] },
            { id: 15, name: 'سمنان', cities: ['سمنان', 'شاهرود', 'دامغان', 'گرمسار', 'مهدی‌شهر', 'سرخه', 'آرادان', 'میامی', 'کلاته', 'بیارجمند', 'دیباج', 'ایوانکی', 'بسطام'] },
            { id: 16, name: 'سیستان و بلوچستان', cities: ['زاهدان', 'زابل', 'چابهار', 'ایرانشهر', 'خاش', 'سراوان', 'نیک‌شهر', 'کنارک', 'سرباز', 'زهک', 'دلگان', 'میرجاوه', 'سوران', 'هیرمند', 'قصرقند', 'فنوج', 'بمپور', 'نصرت‌آباد', 'محمدان', 'پیشین'] },
            { id: 17, name: 'فارس', cities: ['شیراز', 'مرودشت', 'جهرم', 'کازرون', 'فسا', 'داراب', 'لار', 'فسا', 'استهبان', 'لامرد', 'اقلید', 'آباده', 'کوار', 'ممسنی', 'سپیدان', 'فراشبند', 'قیر و کارزین', 'بوانات', 'خرامه', 'خنج', 'گراش', 'نی‌ریز', 'ارسنجان', 'زرقان', 'سروستان', 'کوهچنار', 'بیضا', 'حاجی‌آباد', 'داریان', 'زاهدشهر'] },
            { id: 18, name: 'قزوین', cities: ['قزوین', 'تاکستان', 'آبیک', 'بوئین‌زهرا', 'الوند', 'محمدیه', 'آوج', 'شال', 'اسفرورین', 'ضیاءآباد', 'خرمدشت', 'کوهین', 'رازمیدان', 'دانسفهان', 'سیردان'] },
            { id: 19, name: 'قم', cities: ['قم', 'جعفریه', 'کهک', 'قنوات', 'سلفچگان', 'خلجستان'] },
            { id: 20, name: 'کردستان', cities: ['سنندج', 'سقز', 'مریوان', 'بانه', 'بیجار', 'قروه', 'کامیاران', 'دهگلان', 'دیواندره', 'سروآباد', 'زرینه', 'اورامان', 'برده‌رشه', 'یاسوکند'] },
            { id: 21, name: 'کرمان', cities: ['کرمان', 'رفسنجان', 'سیرجان', 'بم', 'جیرفت', 'زرند', 'بافت', 'کهنوج', 'شهربابک', 'کوهبنان', 'عنبرآباد', 'راور', 'بهرمان', 'منوجان', 'رودبار', 'قلعه گنج', 'کرمانشاه', 'اختیارآباد', 'جوپار', 'چترود', 'گلباف', 'ماهان', 'نرماشیر', 'فهرج', 'راین', 'زیدآباد'] },
            { id: 22, name: 'کرمانشاه', cities: ['کرمانشاه', 'اسلام‌آباد غرب', 'پاوه', 'هرسین', 'کنگاور', 'جوانرود', 'سنقر', 'قصر شیرین', 'گیلانغرب', 'سرپل ذهاب', 'صحنه', 'روانسر', 'ثلاث باباجانی', 'دالاهو', 'شاهو', 'نودشه', 'نوسود', 'میان راهان', 'باینگان', 'کرند'] },
            { id: 23, name: 'کهگیلویه و بویراحمد', cities: ['یاسوج', 'گچساران', 'دنا', 'سی سخت', 'لیکک', 'پاتاوه', 'چرام', 'دهدشت', 'مادوان', 'باشت', 'سوق', 'قلعه رییسی', 'مارگون'] },
            { id: 24, name: 'گلستان', cities: ['گرگان', 'گنبد کاووس', 'علی‌آباد', 'مینودشت', 'ترکمن', 'کردکوی', 'بندر گز', 'آق قلا', 'رامیان', 'آزادشهر', 'گالیکش', 'کلاله', 'مراوه‌تپه', 'سیمین‌شهر', 'نوده خاندوز', 'اینچه برون', 'دلند', 'نوکنده'] },
            { id: 25, name: 'گیلان', cities: ['رشت', 'انزلی', 'لاهیجان', 'لنگرود', 'تالش', 'رودسر', 'صومعه‌سرا', 'آستارا', 'آستانه اشرفیه', 'رودبار', 'فومن', 'ماسال', 'شفت', 'سیاهکل', 'املش', 'هشتپر', 'کومله', 'خشکبیجار', 'لشت نشاء', 'سنگر', 'کوچصفهان', 'بندرانزلی'] },
            { id: 26, name: 'لرستان', cities: ['خرم‌آباد', 'بروجرد', 'دورود', 'کوهدشت', 'الیگودرز', 'نورآباد', 'الشتر', 'پلدختر', 'ازنا', 'سپیددشت', 'چالانچولان', 'زاغه', 'ماهشهر', 'کوهنانی', 'هفت چشمه', 'اشترینان', 'فیروزآباد', 'معمولان', 'سراب دوره', 'ویسیان'] },
            { id: 27, name: 'مازندران', cities: ['ساری', 'بابل', 'آمل', 'قائم‌شهر', 'تنکابن', 'نوشهر', 'چالوس', 'رامسر', 'بهشهر', 'نور', 'جویبار', 'نکا', 'فریدونکنار', 'بابلسر', 'محمودآباد', 'عباس‌آباد', 'کلاردشت', 'سوادکوه', 'گلوگاه', 'رستمکلا', 'پل سفید', 'هچیرود', 'زیرآب', 'شیرگاه', 'کجور', 'مرزن‌آباد', 'امیرکلا', 'فیروزکلا'] },
            { id: 28, name: 'مرکزی', cities: ['اراک', 'ساوه', 'خمین', 'محلات', 'تفرش', 'آشتیان', 'شازند', 'دلیجان', 'زرندیه', 'فراهان', 'کمیجان', 'نراق', 'مهاجران', 'خنداب', 'غرق‌آباد', 'نیمور', 'هندودر', 'آستانه', 'کارچان'] },
            { id: 29, name: 'هرمزگان', cities: ['بندرعباس', 'قشم', 'کیش', 'بندر لنگه', 'میناب', 'رودان', 'بستک', 'حاجی‌آباد', 'جاسک', 'سیریک', 'خمیر', 'پارسیان', 'ابوموسی', 'بشاگرد', 'تخت', 'فین', 'رویدر', 'کنگ', 'هشتبندی', 'سندرک', 'درگهان'] },
            { id: 30, name: 'همدان', cities: ['همدان', 'ملایر', 'نهاوند', 'تویسرکان', 'کبودرآهنگ', 'رزن', 'اسدآباد', 'بهار', 'فامنین', 'لالجین', 'مریانج', 'قهاوند', 'شراء', 'جورقان', 'گل تپه', 'زنگنه'] },
            { id: 31, name: 'یزد', cities: ['یزد', 'میبد', 'اردکان', 'بافق', 'تفت', 'ابرکوه', 'مهریز', 'اشکذر', 'هرات', 'خضرآباد', 'حمیدیا', 'شاهدیه', 'زارچ', 'عقدا', 'بهاباد', 'ندوشن', 'نیر', 'احمدآباد', 'مروست', 'بفروئیه', 'مهردشت'] }
        ];

        // DOM Elements
        const hamburger = document.querySelector('.hamburger');
        const mobileMenu = document.querySelector('.mobile-menu');
        const cartBtn = document.getElementById('cartBtn');
        const cartModal = document.getElementById('cartModal');
        const closeCartBtn = document.querySelector('.close-side-modal');
        const checkoutBtn = document.getElementById('checkoutBtn');
        const checkoutModal = document.getElementById('checkoutModal');
        const closeCheckoutBtn = document.getElementById('closeCheckoutBtn');
        const finishCheckoutBtn = document.getElementById('finishCheckoutBtn');
        const authModal = document.getElementById('authModal');
        const userBtn = document.getElementById('userBtn');
        const closeModalBtns = document.querySelectorAll('.close-modal-btn');
        const searchBtn = document.getElementById('searchBtn');
        const searchContainer = document.getElementById('searchContainer');
        const closeSearchBtn = document.querySelector('.close-search');
        const provinceSelect = document.getElementById('provinceSelect');
        const citySelect = document.getElementById('citySelect');
        const snackbar = document.getElementById('snackbar');
        const snackbarMessage = document.getElementById('snackbarMessage');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authForms = document.querySelectorAll('.auth-form');
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // پر کردن لیست استان‌ها
            populateProvinces();
            
            // مقداردهی اولیه
            initEventListeners();
        });
        
        // پر کردن لیست استان‌ها
        function populateProvinces() {
            provinceSelect.innerHTML = '<option value="">انتخاب استان</option>';
            
            iranProvinces.forEach(province => {
                const option = document.createElement('option');
                option.value = province.id;
                option.textContent = province.name;
                provinceSelect.appendChild(option);
            });
        }
        
        // پر کردن لیست شهرها بر اساس استان انتخاب شده
        provinceSelect.addEventListener('change', function() {
            const provinceId = this.value;
            citySelect.innerHTML = '<option value="">انتخاب شهر</option>';
            
            if (provinceId) {
                citySelect.disabled = false;
                const selectedProvince = iranProvinces.find(p => p.id == provinceId);
                
                selectedProvince.cities.forEach(city => {
                    const option = document.createElement('option');
                    option.value = city;
                    option.textContent = city;
                    citySelect.appendChild(option);
                });
            } else {
                citySelect.disabled = true;
            }
        });
        
        // Initialize Event Listeners
        function initEventListeners() {
            // منوی موبایل
            hamburger.addEventListener('click', function() {
                this.classList.toggle('active');
                mobileMenu.classList.toggle('active');
                document.body.classList.toggle('modal-open');
            });
            
            // باز کردن سبد خرید
            cartBtn.addEventListener('click', function() {
                cartModal.classList.add('open');
                document.body.classList.add('modal-open');
            });
            
            // بستن سبد خرید
            closeCartBtn.addEventListener('click', function() {
                cartModal.classList.remove('open');
                document.body.classList.remove('modal-open');
            });
            
            // باز کردن تسویه حساب
            checkoutBtn.addEventListener('click', function() {
                cartModal.classList.remove('open');
                checkoutModal.classList.add('active');
            });
            
            // بستن تسویه حساب
            closeCheckoutBtn.addEventListener('click', function() {
                checkoutModal.classList.remove('active');
                document.body.classList.remove('modal-open');
            });
            
            // تکمیل تسویه حساب
            finishCheckoutBtn.addEventListener('click', function() {
                checkoutModal.classList.remove('active');
                document.body.classList.remove('modal-open');
                showSnackbar('سفارش شما با موفقیت ثبت شد.', 'success');
            });
            
            // باز کردن مودال احراز هویت
            userBtn.addEventListener('click', function() {
                authModal.classList.add('active');
                document.body.classList.add('modal-open');
            });
            
            // بستن همه مودال‌ها
            closeModalBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const modal = this.closest('.modal');
                    modal.classList.remove('active');
                    document.body.classList.remove('modal-open');
                });
            });
            
            // Tab Switching در احراز هویت
            authTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // غیرفعال کردن همه تب‌ها
                    authTabs.forEach(t => t.classList.remove('active'));
                    authForms.forEach(f => f.classList.remove('active'));
                    
                    // فعال کردن تب انتخاب شده
                    this.classList.add('active');
                    document.getElementById(tabId + 'Form').classList.add('active');
                });
            });
            
            // جستجو
            searchBtn.addEventListener('click', function() {
                searchContainer.classList.add('active');
                document.body.classList.add('modal-open');
            });
            
            closeSearchBtn.addEventListener('click', function() {
                searchContainer.classList.remove('active');
                document.body.classList.remove('modal-open');
            });
            
            // مدیریت مراحل تسویه حساب
            const nextStepButtons = document.querySelectorAll('[data-next-step]');
            const prevStepButtons = document.querySelectorAll('[data-prev-step]');
            
            nextStepButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const currentStep = this.closest('.checkout-form-container');
                    const nextStepNum = this.getAttribute('data-next-step');
                    const nextStep = document.querySelector(`.checkout-form-container[data-step="${nextStepNum}"]`);
                    
                    // به‌روزرسانی وضعیت مراحل
                    updateCheckoutSteps(nextStepNum);
                    
                    // مخفی کردن مرحله فعلی و نمایش مرحله بعد
                    currentStep.classList.remove('active');
                    nextStep.classList.add('active');
                });
            });
            
            prevStepButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const currentStep = this.closest('.checkout-form-container');
                    const prevStepNum = this.getAttribute('data-prev-step');
                    const prevStep = document.querySelector(`.checkout-form-container[data-step="${prevStepNum}"]`);
                    
                    // به‌روزرسانی وضعیت مراحل
                    updateCheckoutSteps(prevStepNum);
                    
                    // مخفی کردن مرحله فعلی و نمایش مرحله قبل
                    currentStep.classList.remove('active');
                    prevStep.classList.add('active');
                });
            });
            
            // افزودن محصول به سبد خرید
            const addToCartButtons = document.querySelectorAll('.action-btn:last-child');
            addToCartButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productCard = this.closest('.product-card');
                    const productName = productCard.querySelector('.product-title').textContent;
                    const productPrice = productCard.querySelector('.product-price').textContent;
                    
                    showSnackbar(`${productName} به سبد خرید اضافه شد.`, 'success');
                    
                    // به‌روزرسانی تعداد محصولات در سبد خرید
                    const badge = cartBtn.querySelector('.badge');
                    badge.textContent = parseInt(badge.textContent) + 1;
                });
            });
            
            // افزودن محصول به علاقه‌مندی‌ها
            const addToWishlistButtons = document.querySelectorAll('.action-btn:first-child');
            addToWishlistButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productCard = this.closest('.product-card');
                    const productName = productCard.querySelector('.product-title').textContent;
                    
                    showSnackbar(`${productName} به علاقه‌مندی‌ها اضافه شد.`, 'success');
                    
                    // تغییر رنگ آیکون قلب
                    this.classList.toggle('active');
                    
                    if (this.classList.contains('active')) {
                        this.innerHTML = '<i class="fas fa-heart" style="color: #c84b31;"></i>';
                    } else {
                        this.innerHTML = '<i class="fas fa-heart"></i>';
                    }
                });
            });
        }
        
        // به‌روزرسانی مراحل تسویه حساب
        function updateCheckoutSteps(currentStep) {
            const steps = document.querySelectorAll('.checkout-step');
            const progressBar = document.querySelector('.checkout-progress');
            
            steps.forEach(step => {
                const stepNum = step.getAttribute('data-step');
                
                if (stepNum < currentStep) {
                    step.classList.add('completed');
                    step.classList.remove('active');
                } else if (stepNum == currentStep) {
                    step.classList.add('active');
                    step.classList.remove('completed');
                } else {
                    step.classList.remove('active', 'completed');
                }
            });
            
            // به‌روزرسانی نوار پیشرفت
            const progressPercentage = ((currentStep - 1) / 3) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }
        
        // نمایش اسنک‌بار
        function showSnackbar(message, type = 'default') {
            snackbarMessage.textContent = message;
            snackbar.className = 'snackbar show';
            
            if (type !== 'default') {
                snackbar.classList.add(type);
            }
            
            setTimeout(() => {
                snackbar.classList.remove('show', 'success', 'error', 'warning');
            }, 3000);
        }
        
        // بستن مودال‌ها با کلیک خارج از محتوا
        document.addEventListener('click', function(e) {
            // مودال‌های معمولی
            document.querySelectorAll('.modal').forEach(modal => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    document.body.classList.remove('modal-open');
                }
            });
            
            // مودال سایدبار
            if (cartModal.classList.contains('open') && e.target === cartModal) {
                cartModal.classList.remove('open');
                document.body.classList.remove('modal-open');
            }
        });
        
        // بستن منوی موبایل با کلیک روی لینک‌ها
        document.querySelectorAll('.mobile-nav-link').forEach(link => {
            link.addEventListener('click', function() {
                hamburger.classList.remove('active');
                mobileMenu.classList.remove('active');
                document.body.classList.remove('modal-open');
            });
        });
    </script>
</body>
</html>
